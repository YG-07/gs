import{d as ve,r as i,n as Y,j as fe,V as s,W as o,X as t,o as a,Y as l,b as C,e as k,$ as x,Q as e,z as Z,v as H,G as u,c as _,O as A,F as S,a4 as ge,a0 as we,a2 as J,Z as ke,_ as xe}from"./@vue-25369eee.js";import{c as Ce,x as De,y as Be}from"./index-9a9dd525.js";import{u as be,b as Ae}from"./vue-router-8466d0f7.js";import{A as ee}from"./@vicons-60bb8b3e.js";import{e as Se,u as Fe}from"./naive-ui-4f3f4243.js";import{_ as Ee}from"./plugin-vueexport-helper-d7c00f7c.js";import"./lodash-0cbe201f.js";import"./date-fns-f8897e89.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./css-render-72c8a4e0.js";import"./@emotion-e1dc9e92.js";import"./@css-render-087315c0.js";import"./seemly-598f553b.js";import"./lodash-es-86019d98.js";import"./vooks-1ac9df45.js";import"./evtd-6b3c7fca.js";import"./vueuc-27029c1a.js";import"./vdirs-943cc171.js";import"./@juggle-28bbed7a.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-38009909.js";import"./async-validator-9e2b95c0.js";const ze=F=>(ke("data-v-21718206"),F=F(),xe(),F),Ne=ze(()=>C("h2",null,"\u78A7\u84DD\u6863\u6848\u6F2B\u753B",-1)),Le={key:0,style:{width:"100%"}},je={class:"card-info"},Ie={class:"img-area"},$e={class:"title"},Pe={key:1,style:{width:"100%"}},Re={key:0,style:{width:"100%"}},Ve={style:{width:"100%","text-align":"center"}},qe=ve({__name:"picacg",setup(F){var K;const te="https://via.placeholder.com/180x280/ccc/fff.jpg&text=NO%20COVER",y=i(Ce()),r=i(!1),D=Se(),q=Fe(),T=be(),E=Ae();let p=i(`
    ${y.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `),ae=i(`
    ${y.value?"width:180px;":"width:38vw;"}
    ${y.value?"height:280px;":"height:60vw;"}
  `);const le=i("width:100%; height:100%;"),ne=i(`
    width:100%;
    object-fit: cover;
    max-height: calc(${y.value?"280px":"60vw"} - 5em);
  `),j=i(`
    ${y.value?"width:50%;":"width:100%;"}
    margin-bottom: 1em;
  `);let z=i(!0),f=i(null),B=i([]),I=i([]),N=i({}),h=i(!0),L=i(""),$=i("");(K=T.query)!=null&&K.id&&(f.value=T.query.id,z.value=!1);const oe=n=>{L.value=n},O=n=>{$.value=L.value},se=()=>{L.value="",$.value=""},ue=async()=>{D.start(),r.value=!0;let{code:n,data:m,msg:c}=await De();if(n!=200){q.error(c),setTimeout(()=>{D.finish()},500),r.value=!1;return}B.value=m.map(g=>(N.value[g.id]=g,g)),setTimeout(()=>{D.finish()},500),r.value=!1},ie=async()=>{D.start(),r.value=!0;let{code:n,data:m,msg:c}=await Be();if(n!=200){q.error(c),setTimeout(()=>{D.finish()},500),r.value=!1;return}I.value=m,setTimeout(()=>{D.finish()},500),r.value=!1},re=n=>{z.value=!1,f.value=n.id,E.push({...E.currentRoute.value,query:{id:n.id}})},P=()=>{z.value=!0,E.push({...E.currentRoute.value,query:{}})},ce=()=>{B.value=B.value.map(n=>{let m=te,c=I.value.find(g=>g.book==n.id);return c&&(m=c.img_url),{...n,url:m}})},R=Y(()=>B.value.filter(n=>n.book_name.includes($.value))),U=Y(()=>f.value?I.value.filter(n=>n.book==f.value):[]);return fe(async()=>{await ie(),await ue(),await ce()}),(n,m)=>{const c=s("n-skeleton"),g=s("n-gradient-text"),de=s("BlueUrlSelect"),M=s("n-layout-header"),w=s("n-space"),_e=s("n-input"),b=s("n-button"),pe=s("n-divider"),G=s("n-image"),me=s("n-card"),Q=s("n-icon"),W=s("n-empty"),V=s("n-flex"),ye=s("n-image-group"),he=s("n-layout-content"),X=s("n-layout");return a(),o(X,null,{default:t(()=>[l(M,{class:"header-top"},{default:t(()=>[C("div",null,[Ne,r.value?(a(),o(c,{key:0,width:150,sharp:!1,size:"medium"})):(a(),o(g,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[k(" \u5171"+x(e(B).length)+"\u672C\uFF0C\u5DF2\u5C55\u793A"+x(e(R).length)+"\u672C ",1)]),_:1},8,["gradient"]))]),r.value?(a(),o(c,{key:0,width:300,sharp:!1,size:"medium"})):(a(),o(de,{key:1}))]),_:1}),l(X,null,{default:t(()=>[l(M,null,{default:t(()=>[r.value?Z((a(),o(w,{key:0,style:u(e(p))},{default:t(()=>[(a(!0),_(S,null,A(new Array(4),(d,v)=>(a(),o(c,{key:v,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[H,e(h)]]):Z((a(),o(w,{key:1,class:"space-main",style:u(e(p))},{default:t(()=>[l(_e,{value:e(L),onKeyup:ge(O,["enter"]),"onUpdate:value":oe,type:"text",placeholder:"\u641C\u7D22\u6F2B\u753B\u540D\u79F0",style:u(y.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),l(w,{style:u(y.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[l(b,{type:"success",style:{width:"84px"},onClick:O},{default:t(()=>[k("\u641C\u7D22")]),_:1}),l(b,{type:"warning",onClick:se},{default:t(()=>[k("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]),_:1},8,["style"])),[[H,e(h)]]),y.value?J("",!0):(a(),o(pe,{key:2,onClick:m[0]||(m[0]=d=>we(h)?h.value=!e(h):h=!e(h))},{default:t(()=>[k(x(e(h)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),l(he,{"has-sider":""},{default:t(()=>[e(z)?(a(),_("div",Le,[r.value?(a(),o(w,{key:0,style:u(e(p))},{default:t(()=>[(a(!0),_(S,null,A(new Array(20),(d,v)=>(a(),_("div",{key:v},[l(c,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!r.value&&e(R).length>0?(a(),o(w,{key:1,style:u([e(p),{"justify-content":"left"}])},{default:t(()=>[(a(!0),_(S,null,A(e(R),(d,v)=>(a(),o(me,{hoverable:"",style:u(e(ae)),"content-style":"padding: 0;",onClick:Te=>re(d)},{default:t(()=>[C("div",je,[C("div",Ie,[l(G,{src:d.url,"object-fit":"cover",lazy:"","img-props":{style:ne.value},style:u(le.value)},null,8,["src","img-props","style"])]),C("div",$e," ("+x(d.total)+"P)"+x(d.book_name),1)])]),_:2},1032,["style","onClick"]))),256))]),_:1},8,["style"])):(a(),o(w,{key:2,style:u([{width:"100%"},e(p)])},{default:t(()=>[l(W,{description:"\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[l(Q,null,{default:t(()=>[l(e(ee))]),_:1})]),_:1})]),_:1},8,["style"]))])):(a(),_("div",Pe,[r.value?(a(),o(w,{key:0,style:u(e(p))},{default:t(()=>[(a(!0),_(S,null,A(new Array(20),(d,v)=>(a(),_("div",{key:v},[l(c,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!r.value&&e(U).length>0?(a(),o(V,{key:1,vertical:"",style:u([{width:"98%"},e(p)])},{default:t(()=>[e(N)[e(f)]?(a(),_("div",Re,[C("h3",Ve,x(e(N)[e(f)].book_name)+" ("+x(e(N)[e(f)].total)+"P)",1)])):J("",!0),C("div",{style:u([{width:"100%"},e(p)])},[l(b,{style:u(j.value),type:"info",ghost:"",onClick:P},{default:t(()=>[k("\u8FD4\u56DE")]),_:1},8,["style"]),l(ye,null,{default:t(()=>[l(V,{vertical:""},{default:t(()=>[(a(!0),_(S,null,A(e(U),(d,v)=>(a(),o(G,{"object-fit":"contain",key:v,src:d.img_url,lazy:"",style:{width:"100%",height:"100vw","margin-bottom":"3px",display:"flex","justify-content":"center"}},null,8,["src"]))),128))]),_:1})]),_:1}),l(b,{style:u(j.value),type:"info",ghost:"",onClick:P},{default:t(()=>[k("\u8FD4\u56DE")]),_:1},8,["style"])],4)]),_:1},8,["style"])):(a(),o(V,{key:2,vertical:"",style:u([{width:"98%"},e(p)])},{default:t(()=>[l(b,{style:u(j.value),type:"info",ghost:"",onClick:P},{default:t(()=>[k("\u8FD4\u56DE")]),_:1},8,["style"]),l(W,{description:"\u6570\u636E\u4E3A\u7A7A",style:{width:"100%","margin-top":"2em"}},{icon:t(()=>[l(Q,null,{default:t(()=>[l(e(ee))]),_:1})]),_:1})]),_:1},8,["style"]))]))]),_:1})]),_:1})]),_:1})}}});const dt=Ee(qe,[["__scopeId","data-v-21718206"]]);export{dt as default};
