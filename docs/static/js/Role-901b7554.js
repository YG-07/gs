import{d as ue,r as o,k as re,j as ie,V as u,W as s,X as t,o as n,Y as a,b as I,Q as e,e as L,$ as W,z as H,v as O,G as r,c as C,O as j,F as G,a4 as pe,a0 as me,a2 as ce,s as A}from"./@vue-79a6a370.js";import{P as de}from"./PicCard-bccf8d91.js";import{c as _e,n as ve,o as ye,q as he}from"./plugin-vueexport-helper-6330f72e.js";import{U as fe}from"./UrlSelect-3add51a5.js";import{C as ge}from"./CommonIcon-134dec63.js";import{u as we}from"./vue-router-4297e4b4.js";import{s as ke}from"./star_rail_select-72af43a0.js";import{G as xe}from"./GitEidtButton-6fa4ecf2.js";import{e as Ce}from"./index-2cd05052.js";import{A as Re}from"./@vicons-79aff705.js";import{e as ze,u as Se}from"./naive-ui-fa278d27.js";import"./lodash-4ca19532.js";import"./date-fns-f8897e89.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./vuex-5ff92b45.js";import"./css-render-72c8a4e0.js";import"./@emotion-e1dc9e92.js";import"./@css-render-ca6fedfc.js";import"./seemly-598f553b.js";import"./lodash-es-86019d98.js";import"./vooks-ed236956.js";import"./evtd-6b3c7fca.js";import"./vueuc-0daedfc4.js";import"./vdirs-943cc171.js";import"./@juggle-28bbed7a.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-38009909.js";import"./async-validator-9e2b95c0.js";const De={class:"header-edit-area"},Ue=I("h2",null,"\u89D2\u8272",-1),st=ue({__name:"Role",setup(be){const _=o(_e());let B=o(100),E=o(169);_.value?(B.value=100,E.value=169):(B.value=45,E.value=76);const c=o(!1),$=ze(),Q=Se();we();let w=o({pageNum:1,pageSize:100}),v=o(!0),R=o(""),z=o(-2),S=o(-2),D=o(-2),U=o(0),k=o([]),f=o(`
    ${_.value?"margin: 20px;":"margin:2px; gap: 8px 5px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const X=l=>{S.value=l,y(1)},Y=l=>{z.value=l,y(1)},J=l=>{D.value=l,y(1)},Z=l=>{R.value=l},ee=l=>{y(1)},te=()=>{R.value="",S.value=z.value=D.value=-2,y(1)},ae=l=>{w.value.pageSize=l,y(1)},le=l=>[A("div",{className:"render-star-rail-weapon-label"},{default:()=>[l.value>-1?A(ge,{url:ke[l.value].icon_url,size:30},{default:()=>A("")}):void 0,A("span",{},{default:()=>l.label})]})],b=o({}),K=async()=>{$.start(),c.value=!0;let l={name:R.value,element:z.value,weapon:S.value,star:D.value,page:w.value},{code:g,data:i,msg:V}=await ye(l);if(g!=200){Q.error(V),setTimeout(()=>{$.finish()},500),c.value=!1;return}U.value=i.total;const{star_rail_base:F,star_rail_wiki_base:p,star_rail_mhy_url:x,star_rail_role:q}=await he(),N=`${F}${x}`,M=`${p}${q}`;k.value=i==null?void 0:i.records.map(d=>(d.mhy_URL=N.replace("{id}",d.mhy_url),d.wiki_URL=M.replace("{id}",d.wiki_url),d.imgSrc=d.icon_url,d)),setTimeout(()=>{$.finish()},500),c.value=!1},y=async l=>{w.value.pageNum=l,k.value=[],U.value=0,K()};return re(async()=>{b.value=await ve()}),ie(()=>{K()}),(l,g)=>{const i=u("n-skeleton"),V=u("n-gradient-text"),F=u("n-layout-header"),p=u("n-space"),x=u("n-select"),q=u("n-input"),N=u("n-button"),M=u("n-divider"),d=u("n-icon"),ne=u("n-empty"),oe=u("n-layout-content"),se=u("n-pagination"),P=u("n-layout");return n(),s(P,null,{default:t(()=>[a(F,{class:"header-top"},{default:t(()=>[I("div",null,[I("div",De,[Ue,a(xe,{path:e(Ce).StarRail.Role},null,8,["path"])]),c.value?(n(),s(i,{key:0,width:150,sharp:!1,size:"medium"})):(n(),s(V,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[L(" \u5171"+W(e(U))+"\u4F4D\uFF0C\u5DF2\u5C55\u793A"+W(e(k).length)+"\u4F4D ",1)]),_:1},8,["gradient"]))]),c.value?(n(),s(i,{key:0,width:300,sharp:!1,size:"medium"})):(n(),s(fe,{key:1}))]),_:1}),a(P,null,{default:t(()=>[a(F,null,{default:t(()=>[c.value?H((n(),s(p,{key:0,style:r(e(f))},{default:t(()=>[(n(!0),C(G,null,j(new Array(8),(m,h)=>(n(),s(i,{key:h,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[O,e(v)]]):H((n(),s(p,{key:1,class:"space-main",style:r(e(f))},{default:t(()=>{var m,h,T;return[a(x,{value:e(D),"onUpdate:value":J,options:(m=b.value)==null?void 0:m.star,style:r(_.value?"width: 200px":"")},null,8,["value","options","style"]),a(x,{"render-label":le,value:e(S),"onUpdate:value":X,options:(h=b.value)==null?void 0:h.weapon,style:r(_.value?"width: 200px":"")},null,8,["value","options","style"]),a(x,{value:e(z),"onUpdate:value":Y,options:(T=b.value)==null?void 0:T.element,style:r(_.value?"width: 200px":"")},null,8,["value","options","style"]),a(q,{value:e(R),onKeyup:pe(ee,["enter"]),"onUpdate:value":Z,type:"text",placeholder:"\u641C\u7D22\u89D2\u8272\u540D",style:r(_.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),a(p,{style:r(_.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[a(N,{type:"success",style:{width:"84px"},onClick:g[0]||(g[0]=Fe=>y(1))},{default:t(()=>[L("\u641C\u7D22")]),_:1}),a(N,{type:"warning",onClick:te},{default:t(()=>[L("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[O,e(v)]]),_.value?ce("",!0):(n(),s(M,{key:2,onClick:g[1]||(g[1]=m=>me(v)?v.value=!e(v):v=!e(v))},{default:t(()=>[L(W(e(v)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),a(oe,{"has-sider":""},{default:t(()=>[c.value?(n(),s(p,{key:0,style:r(e(f))},{default:t(()=>[(n(!0),C(G,null,j(new Array(20),(m,h)=>(n(),C("div",{key:h},[a(i,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!c.value&&e(k).length>0?(n(),s(p,{key:1,style:r(e(f))},{default:t(()=>[(n(!0),C(G,null,j(e(k),(m,h)=>(n(),C("div",{key:h},[a(de,{width:e(B),height:e(E),src:m.imgSrc,item:m,mhy_url:m.mhy_URL,wiki_url:m.wiki_URL,objectFit:"contain"},null,8,["width","height","src","item","mhy_url","wiki_url"])]))),128))]),_:1},8,["style"])):(n(),s(p,{key:2,style:r([{width:"100%"},e(f)])},{default:t(()=>[a(ne,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[a(d,null,{default:t(()=>[a(e(Re))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),a(P,{"content-style":"overflow-x: scroll;"},{default:t(()=>[c.value?(n(),s(p,{key:0,style:r(e(f))},{default:t(()=>[a(i,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(n(),s(p,{key:1,style:r(e(f))},{default:t(()=>[a(se,{page:e(w).pageNum,"page-size":e(w).pageSize,"item-count":e(U),"on-update:page":y,"show-size-picker":"","page-sizes":[10,50,100,150],"on-update:page-size":ae},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{st as default};
