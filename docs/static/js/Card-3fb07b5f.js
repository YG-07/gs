import{d as ee,r as l,k as te,j as ae,V as o,W as n,X as t,o as a,Y as u,b as D,e as b,$ as I,Q as e,z as T,v as j,G as p,c as k,O as K,F as M,a4 as ue,a0 as ne,a2 as le}from"./@vue-79a6a370.js";import{U as oe,P as se}from"./UrlSelect-808ac170.js";import{c as ie,a as re,h as ce,q as pe}from"./index-5cc2c51c.js";import{A as me}from"./@vicons-062edbc6.js";import{e as de,u as _e}from"./naive-ui-fa278d27.js";import"./plugin-vueexport-helper-d7c00f7c.js";import"./lodash-dfafa856.js";import"./date-fns-f8897e89.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./css-render-72c8a4e0.js";import"./@emotion-e1dc9e92.js";import"./@css-render-ca6fedfc.js";import"./seemly-598f553b.js";import"./lodash-es-86019d98.js";import"./vooks-ed236956.js";import"./evtd-6b3c7fca.js";import"./vueuc-0daedfc4.js";import"./vdirs-943cc171.js";import"./@juggle-28bbed7a.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-38009909.js";import"./async-validator-9e2b95c0.js";const ye=D("h2",null,"\u300C\u4E03\u5723\u53EC\u5524\u300D\u5361\u724C\uFF08\u5206\u7C7B\u4EC5\u4F9B\u53C2\u8003\uFF0C\u8BE6\u60C5\u94FE\u63A5\u4EC5\u4E3A\u62C6\u5305\u7F51\uFF09",-1),he=D("p",null,[D("a",{href:"https://bbs.mihoyo.com/ys/obc/channel/map/231/234"},"\u7C73\u6E38\u793E\u4E03\u5723\u53EC\u5524wiki")],-1),Pe=ee({__name:"Card",setup(ve){const h=l(ie());let B=l(100),N=l(169);h.value?(B.value=100,N.value=169):(B.value=45,N.value=76);const m=l(!1),$=de(),G=_e();let d=l(!0),E=l(""),x=l(-2),w=l({pageNum:1,pageSize:100}),F=l(0),C=l([]),y=l(`
    ${h.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const O=s=>{x.value=s,v(1)},Q=s=>{E.value=s},W=s=>{v(1)},X=()=>{E.value="",x.value=-2,v(1)},Y=s=>{w.value.pageSize=s,v(1)};l({});const P=l({}),R=async()=>{$.start(),m.value=!0;let s={name:E.value,card:x.value,page:w.value},{code:f,data:i,msg:U}=await ce(s);if(f!=200){G.error(U),setTimeout(()=>{$.finish()},500),m.value=!1;return}F.value=i.total;const{mhy_base:z,mhy_url:r,wiki_base:A,wiki_book_item:L}=await pe(),S=`${z}${r}`,V=`${A}${L}`;C.value=i==null?void 0:i.records.map(_=>(_.mhy_url=S.replace("{id}","-"),_.wiki_url=V.replace("{id}",_.url),_.imgSrc=`${A}${_.icon_url}`,_)),setTimeout(()=>{$.finish()},500),m.value=!1},v=async s=>{w.value.pageNum=s,C.value=[],F.value=0,R()};return te(async()=>{P.value=await re()}),ae(()=>{R()}),(s,f)=>{const i=o("n-skeleton"),U=o("n-gradient-text"),z=o("n-layout-header"),r=o("n-space"),A=o("n-select"),L=o("n-input"),S=o("n-button"),V=o("n-divider"),_=o("n-icon"),H=o("n-empty"),J=o("n-layout-content"),Z=o("n-pagination"),q=o("n-layout");return a(),n(q,null,{default:t(()=>[u(z,{class:"header-top"},{default:t(()=>[D("div",null,[ye,he,m.value?(a(),n(i,{key:0,width:150,sharp:!1,size:"medium"})):(a(),n(U,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[b(" \u5171"+I(e(F))+"\u4E2A\uFF0C\u5DF2\u5C55\u793A"+I(e(C).length)+"\u4E2A ",1)]),_:1},8,["gradient"]))]),m.value?(a(),n(i,{key:0,width:300,sharp:!1,size:"medium"})):(a(),n(oe,{key:1}))]),_:1}),u(q,null,{default:t(()=>[u(z,null,{default:t(()=>[m.value?T((a(),n(r,{key:0,style:p(e(y))},{default:t(()=>[(a(!0),k(M,null,K(new Array(8),(c,g)=>(a(),n(i,{key:g,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[j,e(d)]]):T((a(),n(r,{key:1,class:"space-main",style:p(e(y))},{default:t(()=>{var c;return[u(A,{value:e(x),"onUpdate:value":O,options:(c=P.value)==null?void 0:c.card,style:p(h.value?"width: 200px":"")},null,8,["value","options","style"]),u(L,{value:e(E),onKeyup:ue(W,["enter"]),"onUpdate:value":Q,type:"text",placeholder:"\u641C\u7D22\u5361\u724C\u7269\u54C1\u540D",style:p(h.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),u(r,{style:p(h.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[u(S,{type:"success",style:{width:"84px"},onClick:f[0]||(f[0]=g=>v(1))},{default:t(()=>[b("\u641C\u7D22")]),_:1}),u(S,{type:"warning",onClick:X},{default:t(()=>[b("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[j,e(d)]]),h.value?le("",!0):(a(),n(V,{key:2,onClick:f[1]||(f[1]=c=>ne(d)?d.value=!e(d):d=!e(d))},{default:t(()=>[b(I(e(d)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),u(J,{"has-sider":""},{default:t(()=>[m.value?(a(),n(r,{key:0,style:p(e(y))},{default:t(()=>[(a(!0),k(M,null,K(new Array(20),(c,g)=>(a(),k("div",{key:g},[u(i,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!m.value&&e(C).length>0?(a(),n(r,{key:1,style:p(e(y))},{default:t(()=>[(a(!0),k(M,null,K(e(C),(c,g)=>(a(),k("div",{key:g},[u(se,{width:e(B),height:e(N),src:c.imgSrc,item:c,mhy_url:c.mhy_url,wiki_url:c.wiki_url},null,8,["width","height","src","item","mhy_url","wiki_url"])]))),128))]),_:1},8,["style"])):(a(),n(r,{key:2,style:p([{width:"100%"},e(y)])},{default:t(()=>[u(H,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[u(_,null,{default:t(()=>[u(e(me))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),u(q,{"content-style":"overflow-x: scroll;"},{default:t(()=>[m.value?(a(),n(r,{key:0,style:p(e(y))},{default:t(()=>[u(i,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(a(),n(r,{key:1,style:p(e(y))},{default:t(()=>[u(Z,{page:e(w).pageNum,"page-size":e(w).pageSize,"item-count":e(F),"on-update:page":v,"show-size-picker":"","page-sizes":[10,50,70,100],"on-update:page-size":Y},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{Pe as default};
