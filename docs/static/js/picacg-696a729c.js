import{d as ve,r as i,n as Y,j as fe,V as u,W as s,X as t,o as a,Y as l,b as C,e as k,$ as x,Q as e,z as Z,v as H,G as n,c as _,O as A,F as S,a4 as ge,a0 as we,a2 as J,Z as ke,_ as xe}from"./@vue-79a6a370.js";import{c as Ce,x as be,y as De}from"./index-9bc1ccfc.js";import{u as Be,b as Ae}from"./vue-router-4297e4b4.js";import{A as ee}from"./@vicons-062edbc6.js";import{e as Se,u as Fe}from"./naive-ui-fa278d27.js";import{_ as Ee}from"./plugin-vueexport-helper-d7c00f7c.js";import"./lodash-4ca19532.js";import"./date-fns-f8897e89.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./css-render-72c8a4e0.js";import"./@emotion-e1dc9e92.js";import"./@css-render-ca6fedfc.js";import"./seemly-598f553b.js";import"./lodash-es-86019d98.js";import"./vooks-ed236956.js";import"./evtd-6b3c7fca.js";import"./vueuc-0daedfc4.js";import"./vdirs-943cc171.js";import"./@juggle-28bbed7a.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-38009909.js";import"./async-validator-9e2b95c0.js";const ze=F=>(ke("data-v-adbea085"),F=F(),xe(),F),Ne=ze(()=>C("h2",null,"\u78A7\u84DD\u6863\u6848\u6F2B\u753B",-1)),$e={key:0,style:{width:"100%"}},Le={class:"card-info"},je={class:"title"},Ie={key:1,style:{width:"100%"}},Pe={key:0,style:{width:"100%"}},Re={style:{width:"100%","text-align":"center"}},Ve=ve({__name:"picacg",setup(F){var K;const te="https://via.placeholder.com/180x280/ccc/fff.jpg&text=NO%20COVER",d=i(Ce()),r=i(!1),b=Se(),q=Fe(),T=Be(),E=Ae();let m=i(`
    ${d.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `),ae=i(`
    ${d.value?"width:180px;":"width:38vw;"}
    ${d.value?"height:280px;":"height:60vw;"}
  `);const le=i("width:100%; height:100%;"),ne=i(`
    width:100%;
    object-fit: cover;
    max-height: calc(${d.value?"280px":"60vw"} - 5em);
  `),L=i(`
    ${d.value?"width:50%;":"width:100%;"}
    margin-bottom: 1em;
  `);let z=i(!0),f=i(null),D=i([]),j=i([]),N=i({}),h=i(!0),$=i(""),I=i("");(K=T.query)!=null&&K.id&&(f.value=T.query.id,z.value=!1);const oe=o=>{$.value=o},O=o=>{I.value=$.value},se=()=>{$.value="",I.value=""},ue=async()=>{b.start(),r.value=!0;let{code:o,data:y,msg:c}=await be();if(o!=200){q.error(c),setTimeout(()=>{b.finish()},500),r.value=!1;return}D.value=y.map(g=>(N.value[g.id]=g,g)),setTimeout(()=>{b.finish()},500),r.value=!1},ie=async()=>{b.start(),r.value=!0;let{code:o,data:y,msg:c}=await De();if(o!=200){q.error(c),setTimeout(()=>{b.finish()},500),r.value=!1;return}j.value=y,setTimeout(()=>{b.finish()},500),r.value=!1},re=o=>{z.value=!1,f.value=o.id,E.push({...E.currentRoute.value,query:{id:o.id}})},P=()=>{z.value=!0,E.push({...E.currentRoute.value,query:{}})},ce=()=>{D.value=D.value.map(o=>{let y=te,c=j.value.find(g=>g.book==o.id);return c&&(y=c.img_url),{...o,url:y}})},R=Y(()=>D.value.filter(o=>o.book_name.includes(I.value))),U=Y(()=>f.value?j.value.filter(o=>o.book==f.value):[]);return fe(async()=>{await ie(),await ue(),await ce()}),(o,y)=>{const c=u("n-skeleton"),g=u("n-gradient-text"),de=u("BlueUrlSelect"),M=u("n-layout-header"),w=u("n-space"),pe=u("n-input"),B=u("n-button"),_e=u("n-divider"),G=u("n-image"),me=u("n-card"),Q=u("n-icon"),W=u("n-empty"),V=u("n-flex"),ye=u("n-image-group"),he=u("n-layout-content"),X=u("n-layout");return a(),s(X,null,{default:t(()=>[l(M,{class:"header-top"},{default:t(()=>[C("div",null,[Ne,r.value?(a(),s(c,{key:0,width:150,sharp:!1,size:"medium"})):(a(),s(g,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[k(" \u5171"+x(e(D).length)+"\u672C\uFF0C\u5DF2\u5C55\u793A"+x(e(R).length)+"\u672C ",1)]),_:1},8,["gradient"]))]),r.value?(a(),s(c,{key:0,width:300,sharp:!1,size:"medium"})):(a(),s(de,{key:1}))]),_:1}),l(X,null,{default:t(()=>[l(M,null,{default:t(()=>[r.value?Z((a(),s(w,{key:0,style:n(e(m))},{default:t(()=>[(a(!0),_(S,null,A(new Array(4),(p,v)=>(a(),s(c,{key:v,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[H,e(h)]]):Z((a(),s(w,{key:1,class:"space-main",style:n(e(m))},{default:t(()=>[l(pe,{value:e($),onKeyup:ge(O,["enter"]),"onUpdate:value":oe,type:"text",placeholder:"\u641C\u7D22\u6F2B\u753B\u540D\u79F0",style:n(d.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),l(w,{style:n(d.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[l(B,{type:"success",style:{width:"84px"},onClick:O},{default:t(()=>[k("\u641C\u7D22")]),_:1}),l(B,{type:"warning",onClick:se},{default:t(()=>[k("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]),_:1},8,["style"])),[[H,e(h)]]),d.value?J("",!0):(a(),s(_e,{key:2,onClick:y[0]||(y[0]=p=>we(h)?h.value=!e(h):h=!e(h))},{default:t(()=>[k(x(e(h)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),l(he,{"has-sider":""},{default:t(()=>[e(z)?(a(),_("div",$e,[r.value?(a(),s(w,{key:0,style:n(e(m))},{default:t(()=>[(a(!0),_(S,null,A(new Array(20),(p,v)=>(a(),_("div",{key:v},[l(c,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!r.value&&e(R).length>0?(a(),s(w,{key:1,style:n([e(m),{"justify-content":"left"}])},{default:t(()=>[(a(!0),_(S,null,A(e(R),(p,v)=>(a(),s(me,{hoverable:"",style:n(e(ae)),"content-style":"padding: 0;",onClick:qe=>re(p)},{default:t(()=>[C("div",Le,[C("div",{class:"img-area",style:n(`${d.value?"height: calc(-5em + 25vw);":"height: calc(-5em + 60vw);"}`)},[l(G,{src:p.url,"object-fit":"cover",lazy:"","img-props":{style:ne.value},style:n(le.value)},null,8,["src","img-props","style"])],4),C("div",je," ("+x(p.total)+"P)"+x(p.book_name),1)])]),_:2},1032,["style","onClick"]))),256))]),_:1},8,["style"])):(a(),s(w,{key:2,style:n([{width:"100%"},e(m)])},{default:t(()=>[l(W,{description:"\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[l(Q,null,{default:t(()=>[l(e(ee))]),_:1})]),_:1})]),_:1},8,["style"]))])):(a(),_("div",Ie,[r.value?(a(),s(w,{key:0,style:n(e(m))},{default:t(()=>[(a(!0),_(S,null,A(new Array(20),(p,v)=>(a(),_("div",{key:v},[l(c,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!r.value&&e(U).length>0?(a(),s(V,{key:1,vertical:"",style:n([{width:"98%"},e(m)])},{default:t(()=>[e(N)[e(f)]?(a(),_("div",Pe,[C("h3",Re,x(e(N)[e(f)].book_name)+" ("+x(e(N)[e(f)].total)+"P)",1)])):J("",!0),C("div",{style:n([{width:"100%"},e(m)])},[l(B,{style:n(L.value),type:"info",ghost:"",onClick:P},{default:t(()=>[k("\u8FD4\u56DE")]),_:1},8,["style"]),l(ye,null,{default:t(()=>[l(V,{vertical:"",style:{width:"100%",display:"flex","flex-wrap":"wrap"}},{default:t(()=>[(a(!0),_(S,null,A(e(U),(p,v)=>(a(),s(G,{"object-fit":"contain",key:v,src:p.img_url,lazy:"",style:n([{"margin-bottom":"3px",display:"flex","justify-content":"center"},`${d.value?"height:30vw;":"width:100%; height:100vw;"}`])},null,8,["src","style"]))),128))]),_:1})]),_:1}),l(B,{style:n(L.value),type:"info",ghost:"",onClick:P},{default:t(()=>[k("\u8FD4\u56DE")]),_:1},8,["style"])],4)]),_:1},8,["style"])):(a(),s(V,{key:2,vertical:"",style:n([{width:"98%"},e(m)])},{default:t(()=>[l(B,{style:n(L.value),type:"info",ghost:"",onClick:P},{default:t(()=>[k("\u8FD4\u56DE")]),_:1},8,["style"]),l(W,{description:"\u6570\u636E\u4E3A\u7A7A",style:{width:"100%","margin-top":"2em"}},{icon:t(()=>[l(Q,null,{default:t(()=>[l(e(ee))]),_:1})]),_:1})]),_:1},8,["style"]))]))]),_:1})]),_:1})]),_:1})}}});const ct=Ee(Ve,[["__scopeId","data-v-adbea085"]]);export{ct as default};
