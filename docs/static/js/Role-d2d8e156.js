import{d as ce,r as u,k as de,j as _e,V as s,W as o,X as l,o as n,Y as a,b as P,Q as t,e as E,$,z as O,v as Q,G as i,c as C,O as V,F as M,a4 as ye,a0 as ve,a2 as he}from"./@vue-79a6a370.js";import{P as fe}from"./PicCard-bccf8d91.js";import{c as ge,l as we,m as ke,q as xe}from"./plugin-vueexport-helper-6330f72e.js";import{U as De}from"./UrlSelect-3add51a5.js";import{u as Ce}from"./vue-router-4297e4b4.js";import{G as ze}from"./GitEidtButton-6fa4ecf2.js";import{e as Re}from"./index-2cd05052.js";import{A as Se}from"./@vicons-79aff705.js";import{e as Ue,u as Ne}from"./naive-ui-fa278d27.js";import"./lodash-4ca19532.js";import"./date-fns-f8897e89.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./vuex-5ff92b45.js";import"./css-render-72c8a4e0.js";import"./@emotion-e1dc9e92.js";import"./@css-render-ca6fedfc.js";import"./seemly-598f553b.js";import"./lodash-es-86019d98.js";import"./vooks-ed236956.js";import"./evtd-6b3c7fca.js";import"./vueuc-0daedfc4.js";import"./vdirs-943cc171.js";import"./@juggle-28bbed7a.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-38009909.js";import"./async-validator-9e2b95c0.js";const Fe={class:"header-edit-area"},Ae=P("h2",null,"\u5973\u6B66\u795E",-1),st=ce({__name:"Role",setup(Be){var K;const y=u(ge()),c=u(!1),L=Ue(),X=Ne(),T=Ce();let b=new Date,G=!0,k=u({pageNum:1,pageSize:100});const Y=e=>e instanceof Date&&!isNaN(e.getTime()),J=e=>e==0?-2:e>3?e-3:e;if((K=T.query)!=null&&K.t){let e=T.query.t;/^\d+$/.test(e)?b=new Date(Number(e)):b=Y(new Date(e))?new Date(e):new Date,J(b.getDay()),G=!1,k.value.pageSize=150}let v=u(G),z=u(""),R=u(-2),S=u(-2),U=u(-2),N=u(-2),F=u(0),x=u([]),f=u(`
    ${y.value?"margin: 20px;":"margin:2px; gap: 8px 5px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const Z=e=>{R.value=e,d(1)},ee=e=>{S.value=e,d(1)},te=e=>{U.value=e,d(1)},ae=e=>{N.value=e,d(1)},le=e=>{z.value=e},ne=e=>{d(1)},oe=()=>{z.value="",R.value=S.value=U.value=N.value=-2,d(1)},ue=e=>{k.value.pageSize=e,d(1)},D=u({}),H=async()=>{L.start(),c.value=!0;let e={name:z.value,element:R.value,role:S.value,star:U.value,damage:N.value,page:k.value},{code:g,data:r,msg:A}=await ke(e);if(console.log(g,r,A,"/"),g!=200){X.error(A),setTimeout(()=>{L.finish()},500),c.value=!1;return}F.value=r.total;const{mhy_base:B,mys_bh3_url:p}=await xe(),w=`${B}${p}`;x.value=r==null?void 0:r.records.map(_=>(_.mhy_URL=w.replace("{id}",_.url),_.wiki_URL=w.replace("{id}",_.url),_.imgSrc=_.icon_url,_)),setTimeout(()=>{L.finish()},500),c.value=!1},d=async e=>{k.value.pageNum=e,x.value=[],F.value=0,H()};return de(async()=>{D.value=await we()}),_e(()=>{H()}),(e,g)=>{const r=s("n-skeleton"),A=s("n-gradient-text"),B=s("n-layout-header"),p=s("n-space"),w=s("n-select"),_=s("n-input"),j=s("n-button"),se=s("n-divider"),ie=s("n-icon"),re=s("n-empty"),pe=s("n-layout-content"),me=s("n-pagination"),q=s("n-layout");return n(),o(q,null,{default:l(()=>[a(B,{class:"header-top"},{default:l(()=>[P("div",null,[P("div",Fe,[Ae,a(ze,{path:t(Re).Honkai.Role},null,8,["path"])]),c.value?(n(),o(r,{key:0,width:150,sharp:!1,size:"medium"})):(n(),o(A,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:l(()=>[E(" \u5171"+$(t(F))+"\u4F4D\uFF0C\u5DF2\u5C55\u793A"+$(t(x).length)+"\u4F4D ",1)]),_:1},8,["gradient"]))]),c.value?(n(),o(r,{key:0,width:300,sharp:!1,size:"medium"})):(n(),o(De,{key:1}))]),_:1}),a(q,null,{default:l(()=>[a(B,null,{default:l(()=>[c.value?O((n(),o(p,{key:0,style:i(t(f))},{default:l(()=>[(n(!0),C(M,null,V(new Array(8),(m,h)=>(n(),o(r,{key:h,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[Q,t(v)]]):O((n(),o(p,{key:1,class:"space-main",style:i(t(f))},{default:l(()=>{var m,h,I,W;return[a(w,{value:t(R),"onUpdate:value":Z,options:(m=D.value)==null?void 0:m.element,style:i(y.value?"width: 200px":"")},null,8,["value","options","style"]),a(w,{value:t(S),"onUpdate:value":ee,options:(h=D.value)==null?void 0:h.role,style:i(y.value?"width: 200px":"")},null,8,["value","options","style"]),a(w,{value:t(U),"onUpdate:value":te,options:(I=D.value)==null?void 0:I.star,style:i(y.value?"width: 200px":"")},null,8,["value","options","style"]),a(w,{value:t(N),"onUpdate:value":ae,options:(W=D.value)==null?void 0:W.damage,style:i(y.value?"width: 200px":"")},null,8,["value","options","style"]),a(_,{value:t(z),onKeyup:ye(ne,["enter"]),"onUpdate:value":le,type:"text",placeholder:"\u641C\u7D22\u89D2\u8272\u540D",style:i(y.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),a(p,{style:i(y.value?"flex:1;":"min-width: 200px;")},{default:l(()=>[a(j,{type:"success",style:{width:"84px"},onClick:g[0]||(g[0]=Ee=>d(1))},{default:l(()=>[E("\u641C\u7D22")]),_:1}),a(j,{type:"warning",onClick:oe},{default:l(()=>[E("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[Q,t(v)]]),y.value?he("",!0):(n(),o(se,{key:2,onClick:g[1]||(g[1]=m=>ve(v)?v.value=!t(v):v=!t(v))},{default:l(()=>[E($(t(v)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),a(pe,{"has-sider":""},{default:l(()=>[c.value?(n(),o(p,{key:0,style:i(t(f))},{default:l(()=>[(n(!0),C(M,null,V(new Array(20),(m,h)=>(n(),C("div",{key:h},[a(r,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!c.value&&t(x).length>0?(n(),o(p,{key:1,style:i(t(f))},{default:l(()=>[(n(!0),C(M,null,V(t(x),(m,h)=>(n(),C("div",{key:h},[a(fe,{src:m.imgSrc,item:m,mhy_url:m.mhy_URL,wiki_url:m.wiki_URL},null,8,["src","item","mhy_url","wiki_url"])]))),128))]),_:1},8,["style"])):(n(),o(p,{key:2,style:i([{width:"100%"},t(f)])},{default:l(()=>[a(re,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:l(()=>[a(ie,null,{default:l(()=>[a(t(Se))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),a(q,{"content-style":"overflow-x: scroll;"},{default:l(()=>[c.value?(n(),o(p,{key:0,style:i(t(f))},{default:l(()=>[a(r,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(n(),o(p,{key:1,style:i(t(f))},{default:l(()=>[a(me,{page:t(k).pageNum,"page-size":t(k).pageSize,"item-count":t(F),"on-update:page":d,"show-size-picker":"","page-sizes":[10,50,100,150],"on-update:page-size":ue},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{st as default};
