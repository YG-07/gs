import{d as te,r as u,k as ae,j as ne,V as l,W as s,X as t,o as n,Y as a,b as R,Q as e,e as D,$ as W,z as q,v as K,G as r,c as z,O as L,F as b,a4 as oe,a0 as le,a2 as se}from"./@vue-79a6a370.js";import{P as ue}from"./PicCard-bccf8d91.js";import{c as re,I as ie,K as pe,q as ce}from"./plugin-vueexport-helper-6330f72e.js";import{u as me}from"./vue-router-4297e4b4.js";import{G as de}from"./GitEidtButton-6fa4ecf2.js";import{e as _e}from"./index-2cd05052.js";import{A as ye}from"./@vicons-79aff705.js";import{e as ve,u as he}from"./naive-ui-fa278d27.js";import"./lodash-4ca19532.js";import"./date-fns-f8897e89.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./vuex-5ff92b45.js";import"./css-render-72c8a4e0.js";import"./@emotion-e1dc9e92.js";import"./@css-render-ca6fedfc.js";import"./seemly-598f553b.js";import"./lodash-es-86019d98.js";import"./vooks-ed236956.js";import"./evtd-6b3c7fca.js";import"./vueuc-0daedfc4.js";import"./vdirs-943cc171.js";import"./@juggle-28bbed7a.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-38009909.js";import"./async-validator-9e2b95c0.js";const fe={class:"header-edit-area"},ge=R("h2",null,"\u97F3\u64CE",-1),Oe=te({__name:"Weapon",setup(we){const f=u(re()),m=u(!1),N=ve(),M=he();me();let P=!0,w=u({pageNum:1,pageSize:100}),d=u(P),C=u(""),x=u(-2),F=u(-2),S=u(0),k=u([]),y=u(`
    ${f.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const G=o=>{x.value=o,v(1)},I=o=>{F.value=o,v(1)},T=o=>{C.value=o},j=o=>{v(1)},O=()=>{C.value="",x.value=F.value=-2,v(1)},Q=o=>{w.value.pageSize=o,v(1)},Z=u({}),$=async()=>{N.start(),m.value=!0;let o={name:C.value,weapon:x.value,star:F.value,page:w.value},{code:g,data:p,msg:B}=await pe(o);if(g!=200){M.error(B),setTimeout(()=>{N.finish()},500),m.value=!1;return}S.value=p.total;const{zzz_base:A,zzz_url:i}=await ce(),E=`${A}${i}`;k.value=p==null?void 0:p.records.map(h=>(h.mhy_URL=E.replace("{id}",h.mhy_url),h.imgSrc=h.icon_url,h)),setTimeout(()=>{N.finish()},500),m.value=!1},v=async o=>{w.value.pageNum=o,k.value=[],S.value=0,$()};return ae(async()=>{Z.value=await ie()}),ne(()=>{$()}),(o,g)=>{const p=l("n-skeleton"),B=l("n-gradient-text"),A=l("n-layout-header"),i=l("n-space"),E=l("n-select"),h=l("n-input"),V=l("n-button"),X=l("n-divider"),Y=l("n-icon"),H=l("n-empty"),J=l("n-layout-content"),ee=l("n-pagination"),U=l("n-layout");return n(),s(U,null,{default:t(()=>[a(A,{class:"header-top"},{default:t(()=>[R("div",null,[R("div",fe,[ge,a(de,{path:e(_e).ZZZ.Weapon},null,8,["path"])]),m.value?(n(),s(p,{key:0,width:150,sharp:!1,size:"medium"})):(n(),s(B,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[D(" \u5171"+W(e(S))+"\u4E2A\uFF0C\u5DF2\u5C55\u793A"+W(e(k).length)+"\u4E2A ",1)]),_:1},8,["gradient"]))])]),_:1}),a(U,null,{default:t(()=>[a(A,null,{default:t(()=>[m.value?q((n(),s(i,{key:0,style:r(e(y))},{default:t(()=>[(n(!0),z(b,null,L(new Array(6),(c,_)=>(n(),s(p,{key:_,width:260,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[K,e(d)]]):q((n(),s(i,{key:1,class:"space-main",style:r(e(y))},{default:t(()=>{var c,_;return[a(E,{value:e(F),"onUpdate:value":I,options:(c=Z.value)==null?void 0:c.star,style:r(f.value?"width: 200px":"")},null,8,["value","options","style"]),a(E,{value:e(x),"onUpdate:value":G,options:(_=Z.value)==null?void 0:_.weapon,style:r(f.value?"width: 200px":"")},null,8,["value","options","style"]),a(h,{value:e(C),onKeyup:oe(j,["enter"]),"onUpdate:value":T,type:"text",placeholder:"\u641C\u7D22\u97F3\u64CE\u540D",style:r(f.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),a(i,{style:r(f.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[a(V,{type:"success",style:{width:"84px"},onClick:g[0]||(g[0]=ke=>v(1))},{default:t(()=>[D("\u641C\u7D22")]),_:1}),a(V,{type:"warning",onClick:O},{default:t(()=>[D("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[K,e(d)]]),f.value?se("",!0):(n(),s(X,{key:2,onClick:g[1]||(g[1]=c=>le(d)?d.value=!e(d):d=!e(d))},{default:t(()=>[D(W(e(d)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),a(J,{"has-sider":""},{default:t(()=>[m.value?(n(),s(i,{key:0,style:r(e(y))},{default:t(()=>[(n(!0),z(b,null,L(new Array(20),(c,_)=>(n(),z("div",{key:_},[a(p,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!m.value&&e(k).length>0?(n(),s(i,{key:1,style:r(e(y))},{default:t(()=>[(n(!0),z(b,null,L(e(k),(c,_)=>(n(),z("div",{key:_},[a(ue,{src:c.imgSrc,item:c,mhy_url:c.mhy_URL,wiki_url:"-"},null,8,["src","item","mhy_url"])]))),128))]),_:1},8,["style"])):(n(),s(i,{key:2,style:r([{width:"100%"},e(y)])},{default:t(()=>[a(H,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[a(Y,null,{default:t(()=>[a(e(ye))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),a(U,{"content-style":"overflow-x: scroll;"},{default:t(()=>[m.value?(n(),s(i,{key:0,style:r(e(y))},{default:t(()=>[a(p,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(n(),s(i,{key:1,style:r(e(y))},{default:t(()=>[a(ee,{page:e(w).pageNum,"page-size":e(w).pageSize,"item-count":e(S),"on-update:page":v,"show-size-picker":"","page-sizes":[30,50,100,150,200,300],"on-update:page-size":Q},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{Oe as default};
