import{d as X,r as c,k as Y,j as H,V as u,W as l,X as t,o as a,Y as n,b as E,Q as e,e as B,$ as L,z as $,v as R,G as m,c as w,O as P,F as b,a4 as J,a0 as Z,a2 as ee}from"./@vue-79a6a370.js";import{B as te,a as ae}from"./BlueUrlSelect-cbe07a09.js";import{c as ne,u as le,x as se,q as ue}from"./plugin-vueexport-helper-6330f72e.js";import{G as oe}from"./GitEidtButton-6fa4ecf2.js";import{e as ie}from"./index-2cd05052.js";import{A as re}from"./@vicons-79aff705.js";import{e as pe,u as ce}from"./naive-ui-fa278d27.js";import"./lodash-4ca19532.js";import"./date-fns-f8897e89.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./vuex-5ff92b45.js";import"./vue-router-4297e4b4.js";import"./css-render-72c8a4e0.js";import"./@emotion-e1dc9e92.js";import"./@css-render-ca6fedfc.js";import"./seemly-598f553b.js";import"./lodash-es-86019d98.js";import"./vooks-ed236956.js";import"./evtd-6b3c7fca.js";import"./vueuc-0daedfc4.js";import"./vdirs-943cc171.js";import"./@juggle-28bbed7a.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-38009909.js";import"./async-validator-9e2b95c0.js";const me={class:"header-edit-area"},de=E("h2",null,"NPC\u548C\u536B\u661F",-1),Ge=X({__name:"npc",setup(_e){const C=c(ne()),r=c(!1),F=pe(),V=ce();let d=c(!0),x=c(""),g=c({pageNum:1,pageSize:100}),z=c(0),h=c([]),y=c(`
    ${C.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const q=p=>{x.value=p},M=p=>{v(1)},G=()=>{x.value="",v(1)},K=p=>{g.value.pageSize=p,v(1)},j=c({}),U=async()=>{F.start(),r.value=!0;let p={name:x.value,page:g.value},{code:f,data:o,msg:D}=await se(p);if(f!=200){V.error(D),F.finish(),r.value=!1;return}z.value=o.total;const{blue_archive_base:N,blue_archive_detail:i}=await ue(),S=`${N}${i}`;h.value=o==null?void 0:o.records.map(s=>(s.wiki_URL=S.replace("{id}",s.url),s.imgSrc=s.icon_url,s.imgList=[],s.img_urls&&(s.imgList=s.img_urls.split(",")),s)),F.finish(),r.value=!1},v=async p=>{g.value.pageNum=p,h.value=[],z.value=0,U()};return Y(async()=>{j.value=await le()}),H(()=>{U()}),(p,f)=>{const o=u("n-skeleton"),D=u("n-gradient-text"),N=u("n-layout-header"),i=u("n-space"),S=u("n-input"),s=u("n-button"),I=u("n-divider"),O=u("n-icon"),Q=u("n-empty"),T=u("n-layout-content"),W=u("n-pagination"),A=u("n-layout");return a(),l(A,null,{default:t(()=>[n(N,{class:"header-top"},{default:t(()=>[E("div",null,[E("div",me,[de,n(oe,{path:e(ie).BlueArchive.NPC},null,8,["path"])]),r.value?(a(),l(o,{key:0,width:150,sharp:!1,size:"medium"})):(a(),l(D,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[B(" \u5171"+L(e(z))+"\u4F4D\uFF0C\u5DF2\u5C55\u793A"+L(e(h).length)+"\u4F4D ",1)]),_:1},8,["gradient"]))]),r.value?(a(),l(o,{key:0,width:300,sharp:!1,size:"medium"})):(a(),l(te,{key:1}))]),_:1}),n(A,null,{default:t(()=>[n(N,null,{default:t(()=>[r.value?$((a(),l(i,{key:0,style:m(e(y))},{default:t(()=>[(a(!0),w(b,null,P(new Array(4),(_,k)=>(a(),l(o,{key:k,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[R,e(d)]]):$((a(),l(i,{key:1,class:"space-main",style:m(e(y))},{default:t(()=>[n(S,{value:e(x),onKeyup:J(M,["enter"]),"onUpdate:value":q,type:"text",placeholder:"\u641C\u7D22NPC\u6216\u536B\u661F\u7684\u540D\u79F0",style:m(C.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),n(i,{style:m(C.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[n(s,{type:"success",style:{width:"84px"},onClick:f[0]||(f[0]=_=>v(1))},{default:t(()=>[B("\u641C\u7D22")]),_:1}),n(s,{type:"warning",onClick:G},{default:t(()=>[B("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]),_:1},8,["style"])),[[R,e(d)]]),C.value?ee("",!0):(a(),l(I,{key:2,onClick:f[1]||(f[1]=_=>Z(d)?d.value=!e(d):d=!e(d))},{default:t(()=>[B(L(e(d)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),n(T,{"has-sider":""},{default:t(()=>[r.value?(a(),l(i,{key:0,style:m(e(y))},{default:t(()=>[(a(!0),w(b,null,P(new Array(20),(_,k)=>(a(),w("div",{key:k},[n(o,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!r.value&&e(h).length>0?(a(),l(i,{key:1,style:m(e(y))},{default:t(()=>[(a(!0),w(b,null,P(e(h),(_,k)=>(a(),w("div",{key:k},[n(ae,{src:_.imgSrc,item:_,url:_.wiki_URL,"img-list":_.imgList},null,8,["src","item","url","img-list"])]))),128))]),_:1},8,["style"])):(a(),l(i,{key:2,style:m([{width:"100%"},e(y)])},{default:t(()=>[n(Q,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[n(O,null,{default:t(()=>[n(e(re))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),n(A,{"content-style":"overflow-x: scroll;"},{default:t(()=>[r.value?(a(),l(i,{key:0,style:m(e(y))},{default:t(()=>[n(o,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(a(),l(i,{key:1,style:m(e(y))},{default:t(()=>[n(W,{page:e(g).pageNum,"page-size":e(g).pageSize,"item-count":e(z),"on-update:page":v,"show-size-picker":"","page-sizes":[10,50,100,150],"on-update:page-size":K},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{Ge as default};
