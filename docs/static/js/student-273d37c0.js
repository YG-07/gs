import{d as xe,r as u,k as Se,j as be,V as p,W as i,X as l,o as n,Y as a,b as ae,e as U,$ as K,Q as t,z as ee,v as te,G as o,c as S,O as P,F as j,a4 as De,a0 as Fe,a2 as Ae,s as E}from"./@vue-79a6a370.js";import{B as ze,a as Be}from"./BlueUrlSelect-bb5c879b.js";import{c as Ue,u as Ee,v as Le,q as Ne}from"./index-2b563dbb.js";import{C as Re}from"./CommonIcon-adfe4e72.js";import{A as $e}from"./@vicons-062edbc6.js";import{e as Ve,u as qe}from"./naive-ui-fa278d27.js";import"./plugin-vueexport-helper-d7c00f7c.js";import"./lodash-dfafa856.js";import"./date-fns-f8897e89.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./css-render-72c8a4e0.js";import"./@emotion-e1dc9e92.js";import"./@css-render-ca6fedfc.js";import"./seemly-598f553b.js";import"./lodash-es-86019d98.js";import"./vooks-ed236956.js";import"./evtd-6b3c7fca.js";import"./vueuc-0daedfc4.js";import"./vdirs-943cc171.js";import"./@juggle-28bbed7a.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-38009909.js";import"./async-validator-9e2b95c0.js";const Ie=[{id:0,name:"\u963F\u62DC\u591A\u65AF",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/169570.png"},{id:1,name:"\u683C\u9ED1\u5A1C",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/824731.png"},{id:2,name:"\u4E09\u4E00",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/869881.png"},{id:3,name:"\u5343\u5E74\u79D1\u5B66",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/873884.png"},{id:4,name:"\u767E\u9B3C\u591C\u884C",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/342619.png"},{id:5,name:"\u5C71\u6D77\u7ECF",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/394261.png"},{id:6,name:"\u963F\u91CC\u4E4C\u65AF",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/302051.png"},{id:7,name:"\u8D64\u51AC",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_688/h_624/829/43637/2023/7/4/747305.png"},{id:8,name:"SRT",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_688/h_624/829/43637/2023/7/4/529744.png"},{id:9,name:"\u74E6\u5C14\u57FA\u91CC",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_688/h_624/829/43637/2023/7/4/401437.png"},{id:10,name:"\u5176\u4ED6",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_688/h_624/829/43637/2023/7/4/120452.png"}],Me=ae("h2",null,"\u5B66\u751F",-1),dt=xe({__name:"student",setup(Te){const r=u(Ue()),h=u(!1),L=Ve(),le=qe();let y=u(!0),b=u(""),D=u(-2),F=u(-2),A=u(-2),N=u(-2),R=u(-2),$=u(-2),V=u(-2),q=u(-2),I=u(-2),C=u({pageNum:1,pageSize:100}),z=u(0),x=u([]),f=u(`
    ${r.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const ne=e=>{D.value=e,s(1)},ue=e=>{F.value=e,s(1)},oe=e=>{N.value=e,s(1)},se=e=>{R.value=e,s(1)},ie=e=>{$.value=e,s(1)},re=e=>{V.value=e,s(1)},pe=e=>{q.value=e,s(1)},ce=e=>{I.value=e,s(1)},me=e=>{A.value=e,s(1)},de=e=>{b.value=e},ve=e=>{s(1)},_e=()=>{b.value="",D.value=F.value=A.value=-2,s(1)},ge=e=>{C.value.pageSize=e,s(1)},he=e=>[E("div",{style:{display:"flex",alignItems:"center"}},{default:()=>[e.value>-1?E(Re,{url:Ie[e.value].icon_url,size:30},{default:()=>E("")}):void 0,E("span",{},{default:()=>e.label})]})],d=u({}),G=async()=>{L.start(),h.value=!0;let e={name:b.value,position:D.value,weapon:F.value,star:A.value,school:N.value,club:R.value,attack:$.value,defense:V.value,map_get:q.value,banner:I.value,page:C.value},{code:k,data:v,msg:M}=await Le(e);if(k!=200){le.error(M),setTimeout(()=>{L.finish()},500),h.value=!1;return}z.value=v.total;const{blue_archive_base:B,blue_archive_detail:_}=await Ne(),c=`${B}${_}`;x.value=v==null?void 0:v.records.map(m=>(m.wiki_URL=c.replace("{id}",m.url),m.imgSrc=m.icon_url,m.imgList=[],m.img_urls&&(m.imgList=m.img_urls.split(",")),m)),setTimeout(()=>{L.finish()},500),h.value=!1},s=async e=>{C.value.pageNum=e,x.value=[],z.value=0,G()};return Se(async()=>{d.value=await Ee()}),be(()=>{G()}),(e,k)=>{const v=p("n-skeleton"),M=p("n-gradient-text"),B=p("n-layout-header"),_=p("n-space"),c=p("n-select"),m=p("n-input"),W=p("n-button"),ye=p("n-divider"),we=p("n-icon"),fe=p("n-empty"),ke=p("n-layout-content"),Ce=p("n-pagination"),T=p("n-layout");return n(),i(T,null,{default:l(()=>[a(B,{class:"header-top"},{default:l(()=>[ae("div",null,[Me,h.value?(n(),i(v,{key:0,width:150,sharp:!1,size:"medium"})):(n(),i(M,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:l(()=>[U(" \u5171"+K(t(z))+"\u4F4D\uFF0C\u5DF2\u5C55\u793A"+K(t(x).length)+"\u4F4D ",1)]),_:1},8,["gradient"]))]),h.value?(n(),i(v,{key:0,width:300,sharp:!1,size:"medium"})):(n(),i(ze,{key:1}))]),_:1}),a(T,null,{default:l(()=>[a(B,null,{default:l(()=>[h.value?ee((n(),i(_,{key:0,style:o(t(f))},{default:l(()=>[(n(!0),S(j,null,P(new Array(8),(g,w)=>(n(),i(v,{key:w,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[te,t(y)]]):ee((n(),i(_,{key:1,class:"space-main",style:o(t(f))},{default:l(()=>{var g,w,O,Q,X,Y,H,J,Z;return[a(c,{value:t(A),"onUpdate:value":me,options:(g=d.value)==null?void 0:g.star,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(c,{value:t(D),"onUpdate:value":ne,options:(w=d.value)==null?void 0:w.position,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(c,{value:t(F),"onUpdate:value":ue,options:(O=d.value)==null?void 0:O.weapon,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(c,{"render-label":he,value:t(N),"onUpdate:value":oe,options:(Q=d.value)==null?void 0:Q.school,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(c,{value:t(R),"onUpdate:value":se,options:(X=d.value)==null?void 0:X.club,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(c,{value:t($),"onUpdate:value":ie,options:(Y=d.value)==null?void 0:Y.attack,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(c,{value:t(V),"onUpdate:value":re,options:(H=d.value)==null?void 0:H.defense,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(c,{value:t(q),"onUpdate:value":pe,options:(J=d.value)==null?void 0:J.map_get,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(c,{value:t(I),"onUpdate:value":ce,options:(Z=d.value)==null?void 0:Z.banner,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(m,{value:t(b),onKeyup:De(ve,["enter"]),"onUpdate:value":de,type:"text",placeholder:"\u641C\u7D22\u5B66\u751F\u540D",style:o(r.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),a(_,{style:o(r.value?"flex:1;":"min-width: 200px;")},{default:l(()=>[a(W,{type:"success",style:{width:"84px"},onClick:k[0]||(k[0]=Ke=>s(1))},{default:l(()=>[U("\u641C\u7D22")]),_:1}),a(W,{type:"warning",onClick:_e},{default:l(()=>[U("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[te,t(y)]]),r.value?Ae("",!0):(n(),i(ye,{key:2,onClick:k[1]||(k[1]=g=>Fe(y)?y.value=!t(y):y=!t(y))},{default:l(()=>[U(K(t(y)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),a(ke,{"has-sider":""},{default:l(()=>[h.value?(n(),i(_,{key:0,style:o(t(f))},{default:l(()=>[(n(!0),S(j,null,P(new Array(20),(g,w)=>(n(),S("div",{key:w},[a(v,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!h.value&&t(x).length>0?(n(),i(_,{key:1,style:o(t(f))},{default:l(()=>[(n(!0),S(j,null,P(t(x),(g,w)=>(n(),S("div",{key:w},[a(Be,{src:g.imgSrc,item:g,url:g.wiki_URL,"img-list":g.imgList},null,8,["src","item","url","img-list"])]))),128))]),_:1},8,["style"])):(n(),i(_,{key:2,style:o([{width:"100%"},t(f)])},{default:l(()=>[a(fe,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:l(()=>[a(we,null,{default:l(()=>[a(t($e))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),a(T,{"content-style":"overflow-x: scroll;"},{default:l(()=>[h.value?(n(),i(_,{key:0,style:o(t(f))},{default:l(()=>[a(v,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(n(),i(_,{key:1,style:o(t(f))},{default:l(()=>[a(Ce,{page:t(C).pageNum,"page-size":t(C).pageSize,"item-count":t(z),"on-update:page":s,"show-size-picker":"","page-sizes":[10,50,100,150],"on-update:page-size":ge},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{dt as default};
