import{d as re,r as s,k as pe,j as ce,V as u,W as i,X as l,M as de,o as n,Y as a,b as q,Q as t,e as B,$,z as j,v as P,G as o,c as E,O as M,F as V,a4 as me,a0 as ve,a2 as _e,s as U}from"./@vue-79a6a370.js";import{W as ye}from"./WavesCard-92c2fa63.js";import{c as fe,A as he,F as ge,q as we,G as ke}from"./plugin-vueexport-helper-6330f72e.js";import{C as xe}from"./CommonIcon-134dec63.js";import{G as Ce}from"./GitEidtButton-6fa4ecf2.js";import{e as ze}from"./index-2cd05052.js";import{A as Ee}from"./@vicons-79aff705.js";import{e as Fe,u as Se}from"./naive-ui-fa278d27.js";import"./lodash-4ca19532.js";import"./date-fns-f8897e89.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./vuex-5ff92b45.js";import"./vue-router-4297e4b4.js";import"./css-render-72c8a4e0.js";import"./@emotion-e1dc9e92.js";import"./@css-render-ca6fedfc.js";import"./seemly-598f553b.js";import"./lodash-es-86019d98.js";import"./vooks-ed236956.js";import"./evtd-6b3c7fca.js";import"./vueuc-0daedfc4.js";import"./vdirs-943cc171.js";import"./@juggle-28bbed7a.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-38009909.js";import"./async-validator-9e2b95c0.js";const Ae={class:"header-edit-area"},De=q("h2",null,"\u58F0\u9AB8",-1),st=re({__name:"Echoes",setup(be){const m=s(fe()),v=s(!1),L=Fe(),O=Se();let Q=!0,k=s({pageNum:1,pageSize:100}),_=s(Q),F=s(""),S=s(-2),A=s(-2),x=s([-2]),D=s(-2),b=s(0),C=s([]),h=s(`
    ${m.value?"margin: 20px;":"margin:2px; gap: 8px 5px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const X=e=>{S.value=e,p(1)},Y=e=>{A.value=e,p(1)},H=e=>{e.includes(-2)&&e.length>1?x.value=e.filter(y=>y!=-2):x.value=e.length>0?e:[-2],p(1)},J=e=>{D.value=e,p(1)},Z=e=>{F.value=e},ee=e=>{p(1)},te=()=>{F.value="",x.value=[],A.value=D.value=S.value=-2,p(1)},ae=e=>{k.value.pageSize=e,p(1)},le=e=>[U("div",{style:{display:"flex",alignItems:"center"}},{default:()=>[e.value>-1?U(xe,{url:ke[e.value].icon_url,size:30},{default:()=>U("")}):void 0,U("span",{},{default:()=>e.label})]})],z=s({}),G=async()=>{L.start(),v.value=!0;let e={name:F.value,level:S.value,suit:de(x.value),cost:A.value,unusual:D.value,page:k.value};console.log(e,"p");let{code:y,data:c,msg:R}=await ge(e);if(y!=200){O.error(R),setTimeout(()=>{L.finish()},500),v.value=!1;return}b.value=c.total;const{waves_base:N,waves_url:r}=await we(),w=`${N}${r}`;C.value=c==null?void 0:c.records.map(g=>(g.surl=w.replace("{id}",g.url),g.imgSrc=g.icon_url,g)),setTimeout(()=>{L.finish()},500),v.value=!1},p=async e=>{k.value.pageNum=e,C.value=[],b.value=0,G()};return pe(async()=>{z.value=await he()}),ce(()=>{G()}),(e,y)=>{const c=u("n-skeleton"),R=u("n-gradient-text"),N=u("n-layout-header"),r=u("n-space"),w=u("n-select"),g=u("n-input"),I=u("n-button"),ne=u("n-divider"),se=u("n-icon"),ue=u("n-empty"),oe=u("n-layout-content"),ie=u("n-pagination"),W=u("n-layout");return n(),i(W,null,{default:l(()=>[a(N,{class:"header-top"},{default:l(()=>[q("div",null,[q("div",Ae,[De,a(Ce,{path:t(ze).Waves.Echoes},null,8,["path"])]),v.value?(n(),i(c,{key:0,width:150,sharp:!1,size:"medium"})):(n(),i(R,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:l(()=>[B(" \u5171"+$(t(b))+"\u4F4D\uFF0C\u5DF2\u5C55\u793A"+$(t(C).length)+"\u4E2A ",1)]),_:1},8,["gradient"]))])]),_:1}),a(W,null,{default:l(()=>[a(N,null,{default:l(()=>[v.value?j((n(),i(r,{key:0,style:o(t(h))},{default:l(()=>[(n(!0),E(V,null,M(new Array(8),(d,f)=>(n(),i(c,{key:f,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[P,t(_)]]):j((n(),i(r,{key:1,class:"space-main",style:o(t(h))},{default:l(()=>{var d,f,K,T;return[a(w,{value:t(S),"onUpdate:value":X,options:(d=z.value)==null?void 0:d.level,style:o(m.value?"width: 200px":"")},null,8,["value","options","style"]),a(w,{multiple:"",clearable:"","render-label":le,value:t(x),"onUpdate:value":H,options:(f=z.value)==null?void 0:f.suit,style:o(m.value?"width: 200px":"")},null,8,["value","options","style"]),a(w,{value:t(A),"onUpdate:value":Y,options:(K=z.value)==null?void 0:K.cost,style:o(m.value?"width: 200px":"")},null,8,["value","options","style"]),a(w,{value:t(D),"onUpdate:value":J,options:(T=z.value)==null?void 0:T.unusual,style:o(m.value?"width: 200px":"")},null,8,["value","options","style"]),a(g,{value:t(F),onKeyup:me(ee,["enter"]),"onUpdate:value":Z,type:"text",placeholder:"\u641C\u7D22\u7269\u54C1\u540D",style:o(m.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),a(r,{style:o(m.value?"flex:1;":"min-width: 200px;")},{default:l(()=>[a(I,{type:"success",style:{width:"84px"},onClick:y[0]||(y[0]=Ne=>p(1))},{default:l(()=>[B("\u641C\u7D22")]),_:1}),a(I,{type:"warning",onClick:te},{default:l(()=>[B("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[P,t(_)]]),m.value?_e("",!0):(n(),i(ne,{key:2,onClick:y[1]||(y[1]=d=>ve(_)?_.value=!t(_):_=!t(_))},{default:l(()=>[B($(t(_)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),a(oe,{"has-sider":""},{default:l(()=>[v.value?(n(),i(r,{key:0,style:o(t(h))},{default:l(()=>[(n(!0),E(V,null,M(new Array(20),(d,f)=>(n(),E("div",{key:f},[a(c,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!v.value&&t(C).length>0?(n(),i(r,{key:1,style:o(t(h))},{default:l(()=>[(n(!0),E(V,null,M(t(C),(d,f)=>(n(),E("div",{key:f},[a(ye,{src:d.imgSrc,item:d,url:d.surl},null,8,["src","item","url"])]))),128))]),_:1},8,["style"])):(n(),i(r,{key:2,style:o([{width:"100%"},t(h)])},{default:l(()=>[a(ue,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:l(()=>[a(se,null,{default:l(()=>[a(t(Ee))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),a(W,{"content-style":"overflow-x: scroll;"},{default:l(()=>[v.value?(n(),i(r,{key:0,style:o(t(h))},{default:l(()=>[a(c,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(n(),i(r,{key:1,style:o(t(h))},{default:l(()=>[a(ie,{page:t(k).pageNum,"page-size":t(k).pageSize,"item-count":t(b),"on-update:page":p,"show-size-picker":"","page-sizes":[10,50,100,150],"on-update:page-size":ae},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{st as default};
