import{d as se,r as s,k as ue,j as re,V as o,W as u,X as t,o as n,Y as a,b as V,Q as e,e as W,$ as L,z as K,v as T,G as r,c as C,O as $,F as R,a4 as ie,a0 as pe,a2 as ce,s as b}from"./@vue-79a6a370.js";import{W as me}from"./WavesCard-92c2fa63.js";import{c as de,A as ve,C as _e,q as ye}from"./plugin-vueexport-helper-6330f72e.js";import{C as fe}from"./CommonIcon-134dec63.js";import{w as he}from"./waves_select_item-287c6662.js";import{G as ge}from"./GitEidtButton-6fa4ecf2.js";import{e as we}from"./index-2cd05052.js";import{A as ke}from"./@vicons-79aff705.js";import{e as xe,u as Ce}from"./naive-ui-fa278d27.js";import"./lodash-4ca19532.js";import"./date-fns-f8897e89.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./vuex-5ff92b45.js";import"./vue-router-4297e4b4.js";import"./css-render-72c8a4e0.js";import"./@emotion-e1dc9e92.js";import"./@css-render-ca6fedfc.js";import"./seemly-598f553b.js";import"./lodash-es-86019d98.js";import"./vooks-ed236956.js";import"./evtd-6b3c7fca.js";import"./vueuc-0daedfc4.js";import"./vdirs-943cc171.js";import"./@juggle-28bbed7a.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-38009909.js";import"./async-validator-9e2b95c0.js";const ze={class:"header-edit-area"},Se=V("h2",null,"\u6B66\u5668",-1),at=se({__name:"Weapon",setup(Ae){const y=s(de()),m=s(!1),E=xe(),j=Ce();let P=!0,w=s({pageNum:1,pageSize:100}),d=s(P),z=s(""),S=s(-2),A=s(-2),D=s(-2),F=s(0),k=s([]),f=s(`
    ${y.value?"margin: 20px;":"margin:2px; gap: 8px 5px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const O=l=>{S.value=l,v(1)},Q=l=>{A.value=l,v(1)},X=l=>{D.value=l,v(1)},Y=l=>{z.value=l},H=l=>{v(1)},J=()=>{z.value="",A.value=S.value=D.value=-2,v(1)},Z=l=>{w.value.pageSize=l,v(1)},ee=l=>[b("div",{style:{display:"flex",alignItems:"center"}},{default:()=>[l.value>-1?b(fe,{url:he[l.value].icon_url,size:30},{default:()=>b("")}):void 0,b("span",{},{default:()=>l.label})]})],B=s({}),q=async()=>{E.start(),m.value=!0;let l={name:z.value,item:S.value,weapon:A.value,star:D.value,page:w.value},{code:g,data:p,msg:I}=await _e(l);if(g!=200){j.error(I),setTimeout(()=>{E.finish()},500),m.value=!1;return}F.value=p.total;const{waves_base:N,waves_url:i}=await ye(),x=`${N}${i}`;k.value=p==null?void 0:p.records.map(h=>(h.surl=x.replace("{id}",h.url),h.imgSrc=h.icon_url,h)),setTimeout(()=>{E.finish()},500),m.value=!1},v=async l=>{w.value.pageNum=l,k.value=[],F.value=0,q()};return ue(async()=>{B.value=await ve()}),re(()=>{q()}),(l,g)=>{const p=o("n-skeleton"),I=o("n-gradient-text"),N=o("n-layout-header"),i=o("n-space"),x=o("n-select"),h=o("n-input"),M=o("n-button"),te=o("n-divider"),ae=o("n-icon"),le=o("n-empty"),ne=o("n-layout-content"),oe=o("n-pagination"),U=o("n-layout");return n(),u(U,null,{default:t(()=>[a(N,{class:"header-top"},{default:t(()=>[V("div",null,[V("div",ze,[Se,a(ge,{path:e(we).Waves.Weapon},null,8,["path"])]),m.value?(n(),u(p,{key:0,width:150,sharp:!1,size:"medium"})):(n(),u(I,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[W(" \u5171"+L(e(F))+"\u4F4D\uFF0C\u5DF2\u5C55\u793A"+L(e(k).length)+"\u4E2A ",1)]),_:1},8,["gradient"]))])]),_:1}),a(U,null,{default:t(()=>[a(N,null,{default:t(()=>[m.value?K((n(),u(i,{key:0,style:r(e(f))},{default:t(()=>[(n(!0),C(R,null,$(new Array(8),(c,_)=>(n(),u(p,{key:_,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[T,e(d)]]):K((n(),u(i,{key:1,class:"space-main",style:r(e(f))},{default:t(()=>{var c,_,G;return[a(x,{value:e(D),"onUpdate:value":X,options:(c=B.value)==null?void 0:c.star,style:r(y.value?"width: 200px":"")},null,8,["value","options","style"]),a(x,{value:e(A),"onUpdate:value":Q,options:(_=B.value)==null?void 0:_.weapon,style:r(y.value?"width: 200px":"")},null,8,["value","options","style"]),a(x,{"render-label":ee,value:e(S),"onUpdate:value":O,options:(G=B.value)==null?void 0:G.item,style:r(y.value?"width: 200px":"")},null,8,["value","options","style"]),a(h,{value:e(z),onKeyup:ie(H,["enter"]),"onUpdate:value":Y,type:"text",placeholder:"\u641C\u7D22\u6B66\u5668\u540D",style:r(y.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),a(i,{style:r(y.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[a(M,{type:"success",style:{width:"84px"},onClick:g[0]||(g[0]=De=>v(1))},{default:t(()=>[W("\u641C\u7D22")]),_:1}),a(M,{type:"warning",onClick:J},{default:t(()=>[W("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[T,e(d)]]),y.value?ce("",!0):(n(),u(te,{key:2,onClick:g[1]||(g[1]=c=>pe(d)?d.value=!e(d):d=!e(d))},{default:t(()=>[W(L(e(d)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),a(ne,{"has-sider":""},{default:t(()=>[m.value?(n(),u(i,{key:0,style:r(e(f))},{default:t(()=>[(n(!0),C(R,null,$(new Array(20),(c,_)=>(n(),C("div",{key:_},[a(p,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!m.value&&e(k).length>0?(n(),u(i,{key:1,style:r(e(f))},{default:t(()=>[(n(!0),C(R,null,$(e(k),(c,_)=>(n(),C("div",{key:_},[a(me,{src:c.imgSrc,item:c,url:c.surl},null,8,["src","item","url"])]))),128))]),_:1},8,["style"])):(n(),u(i,{key:2,style:r([{width:"100%"},e(f)])},{default:t(()=>[a(le,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[a(ae,null,{default:t(()=>[a(e(ke))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),a(U,{"content-style":"overflow-x: scroll;"},{default:t(()=>[m.value?(n(),u(i,{key:0,style:r(e(f))},{default:t(()=>[a(p,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(n(),u(i,{key:1,style:r(e(f))},{default:t(()=>[a(oe,{page:e(w).pageNum,"page-size":e(w).pageSize,"item-count":e(F),"on-update:page":v,"show-size-picker":"","page-sizes":[10,50,100,150],"on-update:page-size":Z},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{at as default};
