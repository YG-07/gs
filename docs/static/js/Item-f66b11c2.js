import{d as le,r as u,k as ne,j as se,V as s,W as o,X as t,o as n,Y as a,b as R,Q as e,e as I,$ as U,z as M,v as G,G as r,c as x,O as W,F as $,a4 as oe,a0 as ue,a2 as re,s as N}from"./@vue-79a6a370.js";import{W as ie}from"./WavesCard-92c2fa63.js";import{c as pe,A as me,E as ce,q as de}from"./plugin-vueexport-helper-6330f72e.js";import{C as _e}from"./CommonIcon-134dec63.js";import{w as ve}from"./waves_select_item-287c6662.js";import{G as ye}from"./GitEidtButton-6fa4ecf2.js";import{e as fe}from"./index-2cd05052.js";import{A as he}from"./@vicons-79aff705.js";import{e as ge,u as we}from"./naive-ui-fa278d27.js";import"./lodash-4ca19532.js";import"./date-fns-f8897e89.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./vuex-5ff92b45.js";import"./vue-router-4297e4b4.js";import"./css-render-72c8a4e0.js";import"./@emotion-e1dc9e92.js";import"./@css-render-ca6fedfc.js";import"./seemly-598f553b.js";import"./lodash-es-86019d98.js";import"./vooks-ed236956.js";import"./evtd-6b3c7fca.js";import"./vueuc-0daedfc4.js";import"./vdirs-943cc171.js";import"./@juggle-28bbed7a.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-38009909.js";import"./async-validator-9e2b95c0.js";const ke={class:"header-edit-area"},xe=R("h2",null,"\u7A81\u7834\u6750\u6599",-1),Ze=le({__name:"Item",setup(Ce){const h=u(pe()),c=u(!1),b=ge(),K=we();let T=!0,w=u({pageNum:1,pageSize:100}),d=u(T),C=u(""),z=u(-2),S=u(-2),A=u(0),k=u([]),v=u(`
    ${h.value?"margin: 20px;":"margin:2px; gap: 8px 5px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const j=l=>{z.value=l,y(1)},P=l=>{S.value=l,y(1)},O=l=>{C.value=l},Q=l=>{y(1)},X=()=>{C.value="",z.value=S.value=-2,y(1)},Y=l=>{w.value.pageSize=l,y(1)},H=l=>[N("div",{style:{display:"flex",alignItems:"center"}},{default:()=>[l.value>-1?N(_e,{url:ve[l.value].icon_url,size:30},{default:()=>N("")}):void 0,N("span",{},{default:()=>l.label})]})],E=u({}),V=async()=>{b.start(),c.value=!0;let l={name:C.value,item:z.value,star:S.value,page:w.value},{code:g,data:p,msg:B}=await ce(l);if(g!=200){K.error(B),setTimeout(()=>{b.finish()},500),c.value=!1;return}A.value=p.total;const{waves_base:D,waves_url:i}=await de(),F=`${D}${i}`;k.value=p==null?void 0:p.records.map(f=>(f.surl=F.replace("{id}",f.url),f.imgSrc=f.icon_url,f)),setTimeout(()=>{b.finish()},500),c.value=!1},y=async l=>{w.value.pageNum=l,k.value=[],A.value=0,V()};return ne(async()=>{E.value=await me()}),se(()=>{V()}),(l,g)=>{const p=s("n-skeleton"),B=s("n-gradient-text"),D=s("n-layout-header"),i=s("n-space"),F=s("n-select"),f=s("n-input"),q=s("n-button"),J=s("n-divider"),Z=s("n-icon"),ee=s("n-empty"),te=s("n-layout-content"),ae=s("n-pagination"),L=s("n-layout");return n(),o(L,null,{default:t(()=>[a(D,{class:"header-top"},{default:t(()=>[R("div",null,[R("div",ke,[xe,a(ye,{path:e(fe).Waves.Item},null,8,["path"])]),c.value?(n(),o(p,{key:0,width:150,sharp:!1,size:"medium"})):(n(),o(B,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[I(" \u5171"+U(e(A))+"\u4F4D\uFF0C\u5DF2\u5C55\u793A"+U(e(k).length)+"\u4E2A ",1)]),_:1},8,["gradient"]))])]),_:1}),a(L,null,{default:t(()=>[a(D,null,{default:t(()=>[c.value?M((n(),o(i,{key:0,style:r(e(v))},{default:t(()=>[(n(!0),x($,null,W(new Array(8),(m,_)=>(n(),o(p,{key:_,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[G,e(d)]]):M((n(),o(i,{key:1,class:"space-main",style:r(e(v))},{default:t(()=>{var m,_;return[a(F,{value:e(S),"onUpdate:value":P,options:(m=E.value)==null?void 0:m.star,style:r(h.value?"width: 200px":"")},null,8,["value","options","style"]),a(F,{"render-label":H,value:e(z),"onUpdate:value":j,options:(_=E.value)==null?void 0:_.item,style:r(h.value?"width: 200px":"")},null,8,["value","options","style"]),a(f,{value:e(C),onKeyup:oe(Q,["enter"]),"onUpdate:value":O,type:"text",placeholder:"\u641C\u7D22\u7269\u54C1\u540D",style:r(h.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),a(i,{style:r(h.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[a(q,{type:"success",style:{width:"84px"},onClick:g[0]||(g[0]=ze=>y(1))},{default:t(()=>[I("\u641C\u7D22")]),_:1}),a(q,{type:"warning",onClick:X},{default:t(()=>[I("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[G,e(d)]]),h.value?re("",!0):(n(),o(J,{key:2,onClick:g[1]||(g[1]=m=>ue(d)?d.value=!e(d):d=!e(d))},{default:t(()=>[I(U(e(d)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),a(te,{"has-sider":""},{default:t(()=>[c.value?(n(),o(i,{key:0,style:r(e(v))},{default:t(()=>[(n(!0),x($,null,W(new Array(20),(m,_)=>(n(),x("div",{key:_},[a(p,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!c.value&&e(k).length>0?(n(),o(i,{key:1,style:r(e(v))},{default:t(()=>[(n(!0),x($,null,W(e(k),(m,_)=>(n(),x("div",{key:_},[a(ie,{src:m.imgSrc,item:m,url:m.surl},null,8,["src","item","url"])]))),128))]),_:1},8,["style"])):(n(),o(i,{key:2,style:r([{width:"100%"},e(v)])},{default:t(()=>[a(ee,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[a(Z,null,{default:t(()=>[a(e(he))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),a(L,{"content-style":"overflow-x: scroll;"},{default:t(()=>[c.value?(n(),o(i,{key:0,style:r(e(v))},{default:t(()=>[a(p,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(n(),o(i,{key:1,style:r(e(v))},{default:t(()=>[a(ae,{page:e(w).pageNum,"page-size":e(w).pageSize,"item-count":e(A),"on-update:page":y,"show-size-picker":"","page-sizes":[10,50,100,150],"on-update:page-size":Y},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{Ze as default};
