import{d as ye,r as s,k as ve,j as fe,V as u,W as o,X as n,o as l,Y as a,b as T,Q as t,e as F,$ as G,z as J,v as Z,G as i,c as D,O as M,F as P,a4 as he,a0 as ge,a2 as we,s as L}from"./@vue-79a6a370.js";import{P as ke}from"./PicCard-bccf8d91.js";import{c as xe,a as Ce,b as De,q as ze}from"./plugin-vueexport-helper-6330f72e.js";import{U as Se}from"./UrlSelect-3add51a5.js";import{C as Ue}from"./CommonIcon-134dec63.js";import{a as Ne}from"./genshin_select-b4b4235a.js";import{u as be}from"./vue-router-4297e4b4.js";import{G as We}from"./GitEidtButton-6fa4ecf2.js";import{e as Ae}from"./index-2cd05052.js";import{A as Be}from"./@vicons-79aff705.js";import{e as Fe,u as Le}from"./naive-ui-fa278d27.js";import"./lodash-4ca19532.js";import"./date-fns-f8897e89.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./vuex-5ff92b45.js";import"./css-render-72c8a4e0.js";import"./@emotion-e1dc9e92.js";import"./@css-render-ca6fedfc.js";import"./seemly-598f553b.js";import"./lodash-es-86019d98.js";import"./vooks-ed236956.js";import"./evtd-6b3c7fca.js";import"./vueuc-0daedfc4.js";import"./vdirs-943cc171.js";import"./@juggle-28bbed7a.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-38009909.js";import"./async-validator-9e2b95c0.js";const Ee={class:"header-edit-area"},$e=T("h2",null,"\u6B66\u5668",-1),_t=ye({__name:"Weapon",setup(qe){var X;const y=s(xe()),c=s(!1),E=Fe(),ee=Le(),K=be();let $=new Date,j=-2,O=!0,g=s({pageNum:1,pageSize:100});const te=e=>e instanceof Date&&!isNaN(e.getTime()),ae=e=>(console.log(e,"/"),e==0?-2:e>3?e-3:e);if((X=K.query)!=null&&X.t){let e=K.query.t;/^\d+$/.test(e)?$=new Date(Number(e)):$=te(new Date(e))?new Date(e):new Date,j=ae($.getDay()),O=!1,g.value.pageSize=300}let v=s(O),z=s(""),S=s(-2),U=s(-2),N=s(j),b=s(-2),W=s(0),x=s([]),h=s(`
    ${y.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const ne=e=>{U.value=e,d(1)},le=e=>{S.value=e,d(1)},oe=e=>{console.log(e,"va"),N.value=e,d(1)},se=e=>{b.value=e,d(1)},ue=e=>{z.value=e},ie=e=>{d(1)},re=()=>{z.value="",S.value=U.value=N.value=b.value=-2,d(1)},pe=e=>{g.value.pageSize=e,d(1)},me=e=>[L("div",{style:{display:"flex",alignItems:"center"}},{default:()=>[e.value>-1?L(Ue,{url:Ne[e.value].icon_url,size:30},{default:()=>L("")}):void 0,L("span",{},{default:()=>e.label})]})],C=s({}),Q=async()=>{E.start(),c.value=!0;let e={name:z.value,item:U.value,weapon:S.value,week:N.value,star:b.value,page:g.value},{code:w,data:r,msg:q}=await De(e);if(w!=200){ee.error(q),setTimeout(()=>{E.finish()},500),c.value=!1;return}W.value=r.total;const{mhy_base:A,mhy_url:p,wiki_base:k,wiki_weapon:R}=await ze(),B=`${A}${p}`,I=`${k}${R}`;x.value=r==null?void 0:r.records.map(_=>(_.mhy_URL=B.replace("{id}",_.mhy_url),_.wiki_URL=I.replace("{id}",_.wiki_url),_.imgSrc=_.icon_url,_)),setTimeout(()=>{E.finish()},500),c.value=!1},d=async e=>{g.value.pageNum=e,x.value=[],W.value=0,Q()};return ve(async()=>{C.value=await Ce()}),fe(()=>{Q()}),(e,w)=>{const r=u("n-skeleton"),q=u("n-gradient-text"),A=u("n-layout-header"),p=u("n-space"),k=u("n-select"),R=u("n-input"),B=u("n-button"),I=u("n-divider"),_=u("n-icon"),ce=u("n-empty"),de=u("n-layout-content"),_e=u("n-pagination"),V=u("n-layout");return l(),o(V,null,{default:n(()=>[a(A,{class:"header-top"},{default:n(()=>[T("div",null,[T("div",Ee,[$e,a(We,{path:t(Ae).Genshin.Weapon},null,8,["path"])]),c.value?(l(),o(r,{key:0,width:150,sharp:!1,size:"medium"})):(l(),o(q,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:n(()=>[F(" \u5171"+G(t(W))+"\u4E2A\uFF0C\u5DF2\u5C55\u793A"+G(t(x).length)+"\u4E2A ",1)]),_:1},8,["gradient"]))]),c.value?(l(),o(r,{key:0,width:300,sharp:!1,size:"medium"})):(l(),o(Se,{key:1}))]),_:1}),a(V,null,{default:n(()=>[a(A,null,{default:n(()=>[c.value?J((l(),o(p,{key:0,style:i(t(h))},{default:n(()=>[(l(!0),D(P,null,M(new Array(6),(m,f)=>(l(),o(r,{key:f,width:260,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[Z,t(v)]]):J((l(),o(p,{key:1,class:"space-main",style:i(t(h))},{default:n(()=>{var m,f,Y,H;return[a(k,{value:t(b),"onUpdate:value":se,options:(m=C.value)==null?void 0:m.star,style:i(y.value?"width: 200px":"")},null,8,["value","options","style"]),a(k,{value:t(N),"onUpdate:value":oe,options:(f=C.value)==null?void 0:f.week,style:i(y.value?"width: 200px":"")},null,8,["value","options","style"]),a(k,{value:t(S),"onUpdate:value":le,options:(Y=C.value)==null?void 0:Y.weapon,style:i(y.value?"width: 200px":"")},null,8,["value","options","style"]),a(k,{"render-label":me,value:t(U),"onUpdate:value":ne,options:(H=C.value)==null?void 0:H.item,style:i(y.value?"width: 200px":"")},null,8,["value","options","style"]),a(R,{value:t(z),onKeyup:he(ie,["enter"]),"onUpdate:value":ue,type:"text",placeholder:"\u641C\u7D22\u6B66\u5668\u540D",style:i(y.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),a(p,{style:i(y.value?"flex:1;":"min-width: 200px;")},{default:n(()=>[a(B,{type:"success",style:{width:"84px"},onClick:w[0]||(w[0]=Re=>d(1))},{default:n(()=>[F("\u641C\u7D22")]),_:1}),a(B,{type:"warning",onClick:re},{default:n(()=>[F("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[Z,t(v)]]),y.value?we("",!0):(l(),o(I,{key:2,onClick:w[1]||(w[1]=m=>ge(v)?v.value=!t(v):v=!t(v))},{default:n(()=>[F(G(t(v)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),a(de,{"has-sider":""},{default:n(()=>[c.value?(l(),o(p,{key:0,style:i(t(h))},{default:n(()=>[(l(!0),D(P,null,M(new Array(20),(m,f)=>(l(),D("div",{key:f},[a(r,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!c.value&&t(x).length>0?(l(),o(p,{key:1,style:i(t(h))},{default:n(()=>[(l(!0),D(P,null,M(t(x),(m,f)=>(l(),D("div",{key:f},[a(ke,{src:m.imgSrc,item:m,mhy_url:m.mhy_URL,wiki_url:m.wiki_URL},null,8,["src","item","mhy_url","wiki_url"])]))),128))]),_:1},8,["style"])):(l(),o(p,{key:2,style:i([{width:"100%"},t(h)])},{default:n(()=>[a(ce,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:n(()=>[a(_,null,{default:n(()=>[a(t(Be))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),a(V,{"content-style":"overflow-x: scroll;"},{default:n(()=>[c.value?(l(),o(p,{key:0,style:i(t(h))},{default:n(()=>[a(r,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(l(),o(p,{key:1,style:i(t(h))},{default:n(()=>[a(_e,{page:t(g).pageNum,"page-size":t(g).pageSize,"item-count":t(W),"on-update:page":d,"show-size-picker":"","page-sizes":[30,50,100,150,200,300],"on-update:page-size":pe},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{_t as default};
