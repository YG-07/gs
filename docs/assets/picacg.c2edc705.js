import{d as ve,r as i,C as fe,a as ge,u as we,M as ke,s as W,E as xe,b as o,c as u,w as t,o as a,e as l,f as C,G as k,t as x,h as e,g as X,v as Y,n,k as y,x as A,y as S,H as Ce,l as De,A as Z,p as be,i as Be}from"./index.401e27f2.js";import{c as Ae,x as Se,y as Fe}from"./index.d639e327.js";import{A as ee}from"./Aperture.bc45313a.js";import{_ as Ee}from"./_plugin-vue_export-helper.cdc0426e.js";const Ne=F=>(be("data-v-adbea085"),F=F(),Be(),F),ze=Ne(()=>C("h2",null,"\u78A7\u84DD\u6863\u6848\u6F2B\u753B",-1)),Le={key:0,style:{width:"100%"}},$e={class:"card-info"},Ie={class:"title"},je={key:1,style:{width:"100%"}},Pe={key:0,style:{width:"100%"}},Re={style:{width:"100%","text-align":"center"}},qe=ve({__name:"picacg",setup(F){var K;const te="https://via.placeholder.com/180x280/ccc/fff.jpg&text=NO%20COVER",d=i(Ae()),c=i(!1),D=fe(),V=ge(),T=we(),E=ke();let p=i(`
    ${d.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `),ae=i(`
    ${d.value?"width:180px;":"width:38vw;"}
    ${d.value?"height:280px;":"height:60vw;"}
  `);const le=i("width:100%; height:100%;"),ne=i(`
    width:100%;
    object-fit: cover;
    max-height: calc(${d.value?"280px":"60vw"} - 5em);
  `),$=i(`
    ${d.value?"width:50%;":"width:100%;"}
    margin-bottom: 1em;
  `);let N=i(!0),f=i(null),b=i([]),I=i([]),z=i({}),m=i(!0),L=i(""),j=i("");(K=T.query)!=null&&K.id&&(f.value=T.query.id,N.value=!1);const se=s=>{L.value=s},M=s=>{j.value=L.value},ue=()=>{L.value="",j.value=""},oe=async()=>{D.start(),c.value=!0;let{code:s,data:h,msg:r}=await Se();if(s!=200){V.error(r),setTimeout(()=>{D.finish()},500),c.value=!1;return}b.value=h.map(g=>(z.value[g.id]=g,g)),setTimeout(()=>{D.finish()},500),c.value=!1},ie=async()=>{D.start(),c.value=!0;let{code:s,data:h,msg:r}=await Fe();if(s!=200){V.error(r),setTimeout(()=>{D.finish()},500),c.value=!1;return}I.value=h,setTimeout(()=>{D.finish()},500),c.value=!1},ce=s=>{N.value=!1,f.value=s.id,E.push({...E.currentRoute.value,query:{id:s.id}})},P=()=>{N.value=!0,E.push({...E.currentRoute.value,query:{}})},re=()=>{b.value=b.value.map(s=>{let h=te,r=I.value.find(g=>g.book==s.id);return r&&(h=r.img_url),{...s,url:h}})},R=W(()=>b.value.filter(s=>s.book_name.includes(j.value))),U=W(()=>f.value?I.value.filter(s=>s.book==f.value):[]);return xe(async()=>{await ie(),await oe(),await re()}),(s,h)=>{const r=o("n-skeleton"),g=o("n-gradient-text"),de=o("BlueUrlSelect"),O=o("n-layout-header"),w=o("n-space"),_e=o("n-input"),B=o("n-button"),ye=o("n-divider"),G=o("n-image"),pe=o("n-card"),H=o("n-icon"),J=o("n-empty"),q=o("n-flex"),he=o("n-image-group"),me=o("n-layout-content"),Q=o("n-layout");return a(),u(Q,null,{default:t(()=>[l(O,{class:"header-top"},{default:t(()=>[C("div",null,[ze,c.value?(a(),u(r,{key:0,width:150,sharp:!1,size:"medium"})):(a(),u(g,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[k(" \u5171"+x(e(b).length)+"\u672C\uFF0C\u5DF2\u5C55\u793A"+x(e(R).length)+"\u672C ",1)]),_:1},8,["gradient"]))]),c.value?(a(),u(r,{key:0,width:300,sharp:!1,size:"medium"})):(a(),u(de,{key:1}))]),_:1}),l(Q,null,{default:t(()=>[l(O,null,{default:t(()=>[c.value?X((a(),u(w,{key:0,style:n(e(p))},{default:t(()=>[(a(!0),y(S,null,A(new Array(4),(_,v)=>(a(),u(r,{key:v,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[Y,e(m)]]):X((a(),u(w,{key:1,class:"space-main",style:n(e(p))},{default:t(()=>[l(_e,{value:e(L),onKeyup:Ce(M,["enter"]),"onUpdate:value":se,type:"text",placeholder:"\u641C\u7D22\u6F2B\u753B\u540D\u79F0",style:n(d.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),l(w,{style:n(d.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[l(B,{type:"success",style:{width:"84px"},onClick:M},{default:t(()=>[k("\u641C\u7D22")]),_:1}),l(B,{type:"warning",onClick:ue},{default:t(()=>[k("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]),_:1},8,["style"])),[[Y,e(m)]]),d.value?Z("",!0):(a(),u(ye,{key:2,onClick:h[0]||(h[0]=_=>De(m)?m.value=!e(m):m=!e(m))},{default:t(()=>[k(x(e(m)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),l(me,{"has-sider":""},{default:t(()=>[e(N)?(a(),y("div",Le,[c.value?(a(),u(w,{key:0,style:n(e(p))},{default:t(()=>[(a(!0),y(S,null,A(new Array(20),(_,v)=>(a(),y("div",{key:v},[l(r,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!c.value&&e(R).length>0?(a(),u(w,{key:1,style:n([e(p),{"justify-content":"left"}])},{default:t(()=>[(a(!0),y(S,null,A(e(R),(_,v)=>(a(),u(pe,{hoverable:"",style:n(e(ae)),"content-style":"padding: 0;",onClick:Ve=>ce(_)},{default:t(()=>[C("div",$e,[C("div",{class:"img-area",style:n(`${d.value?"height: calc(-5em + 25vw);":"height: calc(-5em + 60vw);"}`)},[l(G,{src:_.url,"object-fit":"cover",lazy:"","img-props":{style:ne.value},style:n(le.value)},null,8,["src","img-props","style"])],4),C("div",Ie," ("+x(_.total)+"P)"+x(_.book_name),1)])]),_:2},1032,["style","onClick"]))),256))]),_:1},8,["style"])):(a(),u(w,{key:2,style:n([{width:"100%"},e(p)])},{default:t(()=>[l(J,{description:"\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[l(H,null,{default:t(()=>[l(e(ee))]),_:1})]),_:1})]),_:1},8,["style"]))])):(a(),y("div",je,[c.value?(a(),u(w,{key:0,style:n(e(p))},{default:t(()=>[(a(!0),y(S,null,A(new Array(20),(_,v)=>(a(),y("div",{key:v},[l(r,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!c.value&&e(U).length>0?(a(),u(q,{key:1,vertical:"",style:n([{width:"98%"},e(p)])},{default:t(()=>[e(z)[e(f)]?(a(),y("div",Pe,[C("h3",Re,x(e(z)[e(f)].book_name)+" ("+x(e(z)[e(f)].total)+"P)",1)])):Z("",!0),C("div",{style:n([{width:"100%"},e(p)])},[l(B,{style:n($.value),type:"info",ghost:"",onClick:P},{default:t(()=>[k("\u8FD4\u56DE")]),_:1},8,["style"]),l(he,null,{default:t(()=>[l(q,{vertical:"",style:{width:"100%",display:"flex","flex-wrap":"wrap"}},{default:t(()=>[(a(!0),y(S,null,A(e(U),(_,v)=>(a(),u(G,{"object-fit":"contain",key:v,src:_.img_url,lazy:"",style:n([{"margin-bottom":"3px",display:"flex","justify-content":"center"},`${d.value?"height:30vw;":"width:100%; height:100vw;"}`])},null,8,["src","style"]))),128))]),_:1})]),_:1}),l(B,{style:n($.value),type:"info",ghost:"",onClick:P},{default:t(()=>[k("\u8FD4\u56DE")]),_:1},8,["style"])],4)]),_:1},8,["style"])):(a(),u(q,{key:2,vertical:"",style:n([{width:"98%"},e(p)])},{default:t(()=>[l(B,{style:n($.value),type:"info",ghost:"",onClick:P},{default:t(()=>[k("\u8FD4\u56DE")]),_:1},8,["style"]),l(J,{description:"\u6570\u636E\u4E3A\u7A7A",style:{width:"100%","margin-top":"2em"}},{icon:t(()=>[l(H,null,{default:t(()=>[l(e(ee))]),_:1})]),_:1})]),_:1},8,["style"]))]))]),_:1})]),_:1})]),_:1})}}});const Oe=Ee(qe,[["__scopeId","data-v-adbea085"]]);export{Oe as default};
