import{d as O,r as i,s as T,b as u,o as s,k as S,f as v,e as a,O as oe,h as e,n as o,w as t,G as A,t as F,Q as ie,C as ce,a as re,D as de,E as _e,c as r,g as G,v as H,x as j,y as R,H as pe,l as fe,A as me,m as I,p as ve,i as he}from"./index.401e27f2.js";import{c as P,z as ye,G as ge,q as we,F as ke}from"./index.d639e327.js";import{_ as Q}from"./_plugin-vue_export-helper.cdc0426e.js";import{C as xe}from"./CommonIcon.59c19f89.js";import{A as Ce}from"./Aperture.bc45313a.js";const Ee=O({__name:"WavesEffectCard",props:{src:null,width:null,height:null,item:null,url:null,round:{default:"0.1rem"},objectFit:{default:"fill"},theme:{default:"dark"}},setup(p){const l=p,c=i(P());let x=i(c.value?60:30),$=i(l.width?Number(l.width):x.value),B=i(l.height?Number(l.height):x.value);const g=T(()=>{let d=l.theme=="dark"?"color: #fff;background: #333;":"color: #000;background: #fff;";return c.value||(d+="flex-direction: column;"),d}),f=T(()=>l.item.star!==void 0?`img-item img-item-${l.item.star}`:""),C=()=>{let d=l.url;window.open(d,"_blank")};return(d,N)=>{const w=u("n-image"),h=u("n-ellipsis");return s(),S("div",{class:"WavesCard",style:o(e(g))},[v("div",{class:"waves-item",onClick:C},[a(w,{class:oe(e(f)),style:o(`border-radius: ${p.round};`),width:e($),height:e(B),"preview-disabled":!0,lazy:"",src:p.src,"object-fit":p.objectFit},null,8,["class","style","width","height","src","object-fit"]),a(h,{style:o(c.value?"max-width: 90px":"transform: scale(0.9);font-size: 12px;")},{default:t(()=>[A(F(p.item.name),1)]),_:1},8,["style"])]),ie(d.$slots,"default",{},void 0,!0)],4)}}});const be=Q(Ee,[["__scopeId","data-v-0237c7f5"]]),q=p=>(ve("data-v-09101160"),p=p(),he(),p),ze=q(()=>v("h2",null,"\u5171\u9E23\u6548\u679C",-1)),Se={class:"line-area"},Fe=q(()=>v("div",{class:"label"},"2\u4EF6\u5957",-1)),Ne={class:"info"},Ae={class:"line-area"},De=q(()=>v("div",{class:"label"},"5\u4EF6\u5957",-1)),Ie={class:"info"},$e=O({__name:"Effect",setup(p){const l=i(P()),c=i(!1),x=ce(),$=re();let B=!0,g=i({pageNum:1,pageSize:100}),f=i(B),C=i(""),d=i(-2),N=i(0),w=i([]),h=i(`
    ${l.value?"margin: 20px;":"margin:2px; gap: 8px 5px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const J=n=>{d.value=n,E(1)},X=n=>{C.value=n},Y=n=>{E(1)},Z=()=>{C.value="",d.value=-2,E(1)},ee=n=>{g.value.pageSize=n,E(1)},te=n=>[I("div",{style:{display:"flex",alignItems:"center"}},{default:()=>[n.value>-1?I(xe,{url:ke[n.value].icon_url,size:30},{default:()=>I("")}):void 0,I("span",{},{default:()=>n.label})]})],V=i({}),K=async()=>{x.start(),c.value=!0;let n={name:C.value,suit:d.value,page:g.value},{code:b,data:y,msg:L}=await ge(n);if(b!=200){$.error(L),setTimeout(()=>{x.finish()},500),c.value=!1;return}N.value=y.total;const{waves_base:D,waves_url:m}=await we(),U=`${D}${m}`;w.value=y==null?void 0:y.records.map(k=>(k.surl=U.replace("{id}",k.url),k.imgSrc=k.icon_url,k)),setTimeout(()=>{x.finish()},500),c.value=!1},E=async n=>{g.value.pageNum=n,w.value=[],N.value=0,K()};return de(async()=>{V.value=await ye()}),_e(()=>{K()}),(n,b)=>{const y=u("n-skeleton"),L=u("n-gradient-text"),D=u("n-layout-header"),m=u("n-space"),U=u("n-select"),k=u("n-input"),M=u("n-button"),ae=u("n-divider"),se=u("n-icon"),le=u("n-empty"),ne=u("n-layout-content"),ue=u("n-pagination"),W=u("n-layout");return s(),r(W,null,{default:t(()=>[a(D,{class:"header-top"},{default:t(()=>[v("div",null,[ze,c.value?(s(),r(y,{key:0,width:150,sharp:!1,size:"medium"})):(s(),r(L,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[A(" \u5171"+F(e(N))+"\u4F4D\uFF0C\u5DF2\u5C55\u793A"+F(e(w).length)+"\u4E2A ",1)]),_:1},8,["gradient"]))])]),_:1}),a(W,null,{default:t(()=>[a(D,null,{default:t(()=>[c.value?G((s(),r(m,{key:0,style:o(e(h))},{default:t(()=>[(s(!0),S(R,null,j(new Array(8),(_,z)=>(s(),r(y,{key:z,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[H,e(f)]]):G((s(),r(m,{key:1,class:"space-main",style:o(e(h))},{default:t(()=>{var _;return[a(U,{"render-label":te,value:e(d),"onUpdate:value":J,options:(_=V.value)==null?void 0:_.suit,style:o(l.value?"width: 200px":"")},null,8,["value","options","style"]),a(k,{value:e(C),onKeyup:pe(Y,["enter"]),"onUpdate:value":X,type:"text",placeholder:"\u641C\u7D22\u5173\u952E\u5B57",style:o(l.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),a(m,{style:o(l.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[a(M,{type:"success",style:{width:"84px"},onClick:b[0]||(b[0]=z=>E(1))},{default:t(()=>[A("\u641C\u7D22")]),_:1}),a(M,{type:"warning",onClick:Z},{default:t(()=>[A("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[H,e(f)]]),l.value?me("",!0):(s(),r(ae,{key:2,onClick:b[1]||(b[1]=_=>fe(f)?f.value=!e(f):f=!e(f))},{default:t(()=>[A(F(e(f)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),a(ne,{"has-sider":""},{default:t(()=>[c.value?(s(),r(m,{key:0,style:o(e(h))},{default:t(()=>[(s(!0),S(R,null,j(new Array(20),(_,z)=>(s(),S("div",{key:z},[a(y,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!c.value&&e(w).length>0?(s(),r(m,{key:1,style:o(e(h))},{default:t(()=>[(s(!0),S(R,null,j(e(w),(_,z)=>(s(),S("div",{key:z,style:{display:"flex",height:"100%"}},[a(be,{src:_.imgSrc,item:_,url:_.surl,style:{height:"100%"}},{default:t(()=>[v("div",{class:"effect-info-area",style:o(`${l.value?"width: 15vw;":"width: 30vw;"}`)},[v("div",Se,[Fe,v("div",Ne,F(_.suit2),1)]),v("div",Ae,[De,v("div",Ie,F(_.suit5),1)])],4)]),_:2},1032,["src","item","url"])]))),128))]),_:1},8,["style"])):(s(),r(m,{key:2,style:o([{width:"100%"},e(h)])},{default:t(()=>[a(le,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[a(se,null,{default:t(()=>[a(e(Ce))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),a(W,{"content-style":"overflow-x: scroll;"},{default:t(()=>[c.value?(s(),r(m,{key:0,style:o(e(h))},{default:t(()=>[a(y,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(s(),r(m,{key:1,style:o(e(h))},{default:t(()=>[a(ue,{page:e(g).pageNum,"page-size":e(g).pageSize,"item-count":e(N),"on-update:page":E,"show-size-picker":"","page-sizes":[10,50,100,150],"on-update:page-size":ee},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});const Re=Q($e,[["__scopeId","data-v-09101160"]]);export{Re as default};
