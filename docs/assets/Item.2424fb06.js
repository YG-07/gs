import{d as le,r as o,C as ne,a as se,D as ue,E as oe,b as s,c as u,w as t,o as n,e as a,f as M,G as N,t as U,h as e,g as W,v as K,n as r,k as x,x as R,y as $,H as re,l as ie,A as ce,m as b}from"./index.401e27f2.js";import{W as pe}from"./WavesCard.6799ca8a.js";import{c as de,z as me,C as _e,q as ye}from"./index.d639e327.js";import{C as ve}from"./CommonIcon.59c19f89.js";import{w as fe}from"./waves_select_item.d00489ae.js";import{A as ge}from"./Aperture.bc45313a.js";import"./_plugin-vue_export-helper.cdc0426e.js";const he=M("h2",null,"\u7A81\u7834\u6750\u6599",-1),Ne=le({__name:"Item",setup(we){const g=o(de()),d=o(!1),I=ne(),T=se();let j=!0,w=o({pageNum:1,pageSize:100}),m=o(j),C=o(""),z=o(-2),S=o(-2),A=o(0),k=o([]),y=o(`
    ${g.value?"margin: 20px;":"margin:2px; gap: 8px 5px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const G=l=>{z.value=l,v(1)},H=l=>{S.value=l,v(1)},P=l=>{C.value=l},J=l=>{v(1)},O=()=>{C.value="",z.value=S.value=-2,v(1)},Q=l=>{w.value.pageSize=l,v(1)},X=l=>[b("div",{style:{display:"flex",alignItems:"center"}},{default:()=>[l.value>-1?b(ve,{url:fe[l.value].icon_url,size:30},{default:()=>b("")}):void 0,b("span",{},{default:()=>l.label})]})],E=o({}),q=async()=>{I.start(),d.value=!0;let l={name:C.value,item:z.value,star:S.value,page:w.value},{code:h,data:c,msg:B}=await _e(l);if(h!=200){T.error(B),setTimeout(()=>{I.finish()},500),d.value=!1;return}A.value=c.total;const{waves_base:D,waves_url:i}=await ye(),F=`${D}${i}`;k.value=c==null?void 0:c.records.map(f=>(f.surl=F.replace("{id}",f.url),f.imgSrc=f.icon_url,f)),setTimeout(()=>{I.finish()},500),d.value=!1},v=async l=>{w.value.pageNum=l,k.value=[],A.value=0,q()};return ue(async()=>{E.value=await me()}),oe(()=>{q()}),(l,h)=>{const c=s("n-skeleton"),B=s("n-gradient-text"),D=s("n-layout-header"),i=s("n-space"),F=s("n-select"),f=s("n-input"),V=s("n-button"),Y=s("n-divider"),Z=s("n-icon"),ee=s("n-empty"),te=s("n-layout-content"),ae=s("n-pagination"),L=s("n-layout");return n(),u(L,null,{default:t(()=>[a(D,{class:"header-top"},{default:t(()=>[M("div",null,[he,d.value?(n(),u(c,{key:0,width:150,sharp:!1,size:"medium"})):(n(),u(B,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[N(" \u5171"+U(e(A))+"\u4F4D\uFF0C\u5DF2\u5C55\u793A"+U(e(k).length)+"\u4E2A ",1)]),_:1},8,["gradient"]))])]),_:1}),a(L,null,{default:t(()=>[a(D,null,{default:t(()=>[d.value?W((n(),u(i,{key:0,style:r(e(y))},{default:t(()=>[(n(!0),x($,null,R(new Array(8),(p,_)=>(n(),u(c,{key:_,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[K,e(m)]]):W((n(),u(i,{key:1,class:"space-main",style:r(e(y))},{default:t(()=>{var p,_;return[a(F,{value:e(S),"onUpdate:value":H,options:(p=E.value)==null?void 0:p.star,style:r(g.value?"width: 200px":"")},null,8,["value","options","style"]),a(F,{"render-label":X,value:e(z),"onUpdate:value":G,options:(_=E.value)==null?void 0:_.item,style:r(g.value?"width: 200px":"")},null,8,["value","options","style"]),a(f,{value:e(C),onKeyup:re(J,["enter"]),"onUpdate:value":P,type:"text",placeholder:"\u641C\u7D22\u7269\u54C1\u540D",style:r(g.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),a(i,{style:r(g.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[a(V,{type:"success",style:{width:"84px"},onClick:h[0]||(h[0]=ke=>v(1))},{default:t(()=>[N("\u641C\u7D22")]),_:1}),a(V,{type:"warning",onClick:O},{default:t(()=>[N("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[K,e(m)]]),g.value?ce("",!0):(n(),u(Y,{key:2,onClick:h[1]||(h[1]=p=>ie(m)?m.value=!e(m):m=!e(m))},{default:t(()=>[N(U(e(m)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),a(te,{"has-sider":""},{default:t(()=>[d.value?(n(),u(i,{key:0,style:r(e(y))},{default:t(()=>[(n(!0),x($,null,R(new Array(20),(p,_)=>(n(),x("div",{key:_},[a(c,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!d.value&&e(k).length>0?(n(),u(i,{key:1,style:r(e(y))},{default:t(()=>[(n(!0),x($,null,R(e(k),(p,_)=>(n(),x("div",{key:_},[a(pe,{src:p.imgSrc,item:p,url:p.surl},null,8,["src","item","url"])]))),128))]),_:1},8,["style"])):(n(),u(i,{key:2,style:r([{width:"100%"},e(y)])},{default:t(()=>[a(ee,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[a(Z,null,{default:t(()=>[a(e(ge))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),a(L,{"content-style":"overflow-x: scroll;"},{default:t(()=>[d.value?(n(),u(i,{key:0,style:r(e(y))},{default:t(()=>[a(c,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(n(),u(i,{key:1,style:r(e(y))},{default:t(()=>[a(ae,{page:e(w).pageNum,"page-size":e(w).pageSize,"item-count":e(A),"on-update:page":v,"show-size-picker":"","page-sizes":[10,50,100,150],"on-update:page-size":Q},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{Ne as default};
