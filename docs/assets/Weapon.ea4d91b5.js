import{d as _e,r as s,z as ve,a as fe,u as he,A as ge,B as we,b as o,c as u,w as a,o as l,e as n,f as Z,q as W,t as T,h as t,g as X,v as Y,n as i,k as D,C as K,D as M,E as ke,l as xe,x as Ce,m as q}from"./index.7fd40ef4.js";import{U as De,P as ze}from"./UrlSelect.d1cd8054.js";import{c as Se,a as Ue,b as Ne,q as be}from"./index.569b1bd1.js";import{C as Ae}from"./CommonIcon.6a78dab8.js";import{a as Be}from"./genshin_select.6ad335e3.js";import{A as Le}from"./Aperture.a9bd491a.js";import"./_plugin-vue_export-helper.cdc0426e.js";const We=Z("h2",null,"\u6B66\u5668",-1),Me=_e({__name:"Weapon",setup(qe){var J;const _=s(Se()),d=s(!1),E=ve(),ee=fe(),P=he();let F=new Date,j=-2,G=!0,g=s({pageNum:1,pageSize:100});const te=e=>e instanceof Date&&!isNaN(e.getTime()),ae=e=>(console.log(e,"/"),e==0?-2:e>3?e-3:e);if((J=P.query)!=null&&J.t){let e=P.query.t;/^\d+$/.test(e)?F=new Date(Number(e)):F=te(new Date(e))?new Date(e):new Date,j=ae(F.getDay()),G=!1,g.value.pageSize=300}let v=s(G),z=s(""),S=s(-2),U=s(-2),N=s(j),b=s(-2),A=s(0),x=s([]),h=s(`
    ${_.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const ne=e=>{U.value=e,m(1)},le=e=>{S.value=e,m(1)},ue=e=>{console.log(e,"va"),N.value=e,m(1)},se=e=>{b.value=e,m(1)},oe=e=>{z.value=e},ie=e=>{m(1)},re=()=>{z.value="",S.value=U.value=N.value=b.value=-2,m(1)},ce=e=>{g.value.pageSize=e,m(1)},pe=e=>[q("div",{style:{display:"flex",alignItems:"center"}},{default:()=>[e.value>-1?q(Ae,{url:Be[e.value].icon_url,size:30},{default:()=>q("")}):void 0,q("span",{},{default:()=>e.label})]})],C=s({}),H=async()=>{E.start(),d.value=!0;let e={name:z.value,item:U.value,weapon:S.value,week:N.value,star:b.value,page:g.value},{code:w,data:r,msg:R}=await Ne(e);if(w!=200){ee.error(R),setTimeout(()=>{E.finish()},500),d.value=!1;return}A.value=r.total;const{mhy_base:B,mhy_url:c,wiki_base:k,wiki_weapon:$}=await be(),L=`${B}${c}`,I=`${k}${$}`;x.value=r==null?void 0:r.records.map(y=>(y.mhy_URL=L.replace("{id}",y.mhy_url),y.wiki_URL=I.replace("{id}",y.wiki_url),y.imgSrc=y.icon_url,y)),setTimeout(()=>{E.finish()},500),d.value=!1},m=async e=>{g.value.pageNum=e,x.value=[],A.value=0,H()};return ge(async()=>{C.value=await Ue()}),we(()=>{H()}),(e,w)=>{const r=o("n-skeleton"),R=o("n-gradient-text"),B=o("n-layout-header"),c=o("n-space"),k=o("n-select"),$=o("n-input"),L=o("n-button"),I=o("n-divider"),y=o("n-icon"),de=o("n-empty"),me=o("n-layout-content"),ye=o("n-pagination"),V=o("n-layout");return l(),u(V,null,{default:a(()=>[n(B,{class:"header-top"},{default:a(()=>[Z("div",null,[We,d.value?(l(),u(r,{key:0,width:150,sharp:!1,size:"medium"})):(l(),u(R,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:a(()=>[W(" \u5171"+T(t(A))+"\u4E2A\uFF0C\u5DF2\u5C55\u793A"+T(t(x).length)+"\u4E2A ",1)]),_:1},8,["gradient"]))]),d.value?(l(),u(r,{key:0,width:300,sharp:!1,size:"medium"})):(l(),u(De,{key:1}))]),_:1}),n(V,null,{default:a(()=>[n(B,null,{default:a(()=>[d.value?X((l(),u(c,{key:0,style:i(t(h))},{default:a(()=>[(l(!0),D(M,null,K(new Array(6),(p,f)=>(l(),u(r,{key:f,width:260,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[Y,t(v)]]):X((l(),u(c,{key:1,class:"space-main",style:i(t(h))},{default:a(()=>{var p,f,O,Q;return[n(k,{value:t(b),"onUpdate:value":se,options:(p=C.value)==null?void 0:p.star,style:i(_.value?"width: 200px":"")},null,8,["value","options","style"]),n(k,{value:t(N),"onUpdate:value":ue,options:(f=C.value)==null?void 0:f.week,style:i(_.value?"width: 200px":"")},null,8,["value","options","style"]),n(k,{value:t(S),"onUpdate:value":le,options:(O=C.value)==null?void 0:O.weapon,style:i(_.value?"width: 200px":"")},null,8,["value","options","style"]),n(k,{"render-label":pe,value:t(U),"onUpdate:value":ne,options:(Q=C.value)==null?void 0:Q.item,style:i(_.value?"width: 200px":"")},null,8,["value","options","style"]),n($,{value:t(z),onKeyup:ke(ie,["enter"]),"onUpdate:value":oe,type:"text",placeholder:"\u641C\u7D22\u6B66\u5668\u540D",style:i(_.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),n(c,{style:i(_.value?"flex:1;":"min-width: 200px;")},{default:a(()=>[n(L,{type:"success",style:{width:"84px"},onClick:w[0]||(w[0]=Ee=>m(1))},{default:a(()=>[W("\u641C\u7D22")]),_:1}),n(L,{type:"warning",onClick:re},{default:a(()=>[W("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[Y,t(v)]]),_.value?Ce("",!0):(l(),u(I,{key:2,onClick:w[1]||(w[1]=p=>xe(v)?v.value=!t(v):v=!t(v))},{default:a(()=>[W(T(t(v)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),n(me,{"has-sider":""},{default:a(()=>[d.value?(l(),u(c,{key:0,style:i(t(h))},{default:a(()=>[(l(!0),D(M,null,K(new Array(20),(p,f)=>(l(),D("div",{key:f},[n(r,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!d.value&&t(x).length>0?(l(),u(c,{key:1,style:i(t(h))},{default:a(()=>[(l(!0),D(M,null,K(t(x),(p,f)=>(l(),D("div",{key:f},[n(ze,{src:p.imgSrc,item:p,mhy_url:p.mhy_URL,wiki_url:p.wiki_URL},null,8,["src","item","mhy_url","wiki_url"])]))),128))]),_:1},8,["style"])):(l(),u(c,{key:2,style:i([{width:"100%"},t(h)])},{default:a(()=>[n(de,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:a(()=>[n(y,null,{default:a(()=>[n(t(Le))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),n(V,{"content-style":"overflow-x: scroll;"},{default:a(()=>[d.value?(l(),u(c,{key:0,style:i(t(h))},{default:a(()=>[n(r,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(l(),u(c,{key:1,style:i(t(h))},{default:a(()=>[n(ye,{page:t(g).pageNum,"page-size":t(g).pageSize,"item-count":t(A),"on-update:page":m,"show-size-picker":"","page-sizes":[30,50,100,150,200,300],"on-update:page-size":ce},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{Me as default};
