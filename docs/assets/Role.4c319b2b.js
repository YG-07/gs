import{d as oe,r as s,C as re,a as ie,u as ce,D as pe,E as de,b as o,c as u,w as t,o as l,e as n,f as J,G as A,t as M,h as e,g as H,v as G,n as r,k as C,x as P,y as T,H as _e,l as me,A as ye,m as L}from"./index.401e27f2.js";import{U as ve,P as he}from"./UrlSelect.99668f62.js";import{c as fe,n as ge,o as we,q as ke}from"./index.d639e327.js";import{C as xe}from"./CommonIcon.59c19f89.js";import{s as Ce}from"./star_rail_select.09ae8527.js";import{A as ze}from"./Aperture.bc45313a.js";import"./_plugin-vue_export-helper.cdc0426e.js";const Re=J("h2",null,"\u89D2\u8272",-1),Be=oe({__name:"Role",setup(Se){const m=s(fe());let E=s(100),B=s(169);m.value?(E.value=100,B.value=169):(E.value=45,B.value=76);const d=s(!1),$=re(),O=ie();ce();let w=s({pageNum:1,pageSize:100}),y=s(!0),z=s(""),R=s(-2),S=s(-2),D=s(-2),U=s(0),k=s([]),f=s(`
    ${m.value?"margin: 20px;":"margin:2px; gap: 8px 5px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const Q=a=>{S.value=a,v(1)},X=a=>{R.value=a,v(1)},Y=a=>{D.value=a,v(1)},Z=a=>{z.value=a},ee=a=>{v(1)},te=()=>{z.value="",S.value=R.value=D.value=-2,v(1)},ae=a=>{w.value.pageSize=a,v(1)},le=a=>[L("div",{className:"render-star-rail-weapon-label"},{default:()=>[a.value>-1?L(xe,{url:Ce[a.value].icon_url,size:30},{default:()=>L("")}):void 0,L("span",{},{default:()=>a.label})]})],b=s({}),W=async()=>{$.start(),d.value=!0;let a={name:z.value,element:R.value,weapon:S.value,star:D.value,page:w.value},{code:g,data:i,msg:q}=await we(a);if(g!=200){O.error(q),setTimeout(()=>{$.finish()},500),d.value=!1;return}U.value=i.total;const{star_rail_base:F,star_rail_wiki_base:c,star_rail_mhy_url:x,star_rail_role:V}=await ke(),N=`${F}${x}`,I=`${c}${V}`;k.value=i==null?void 0:i.records.map(_=>(_.mhy_URL=N.replace("{id}",_.mhy_url),_.wiki_URL=I.replace("{id}",_.wiki_url),_.imgSrc=_.icon_url,_)),setTimeout(()=>{$.finish()},500),d.value=!1},v=async a=>{w.value.pageNum=a,k.value=[],U.value=0,W()};return pe(async()=>{b.value=await ge()}),de(()=>{W()}),(a,g)=>{const i=o("n-skeleton"),q=o("n-gradient-text"),F=o("n-layout-header"),c=o("n-space"),x=o("n-select"),V=o("n-input"),N=o("n-button"),I=o("n-divider"),_=o("n-icon"),ne=o("n-empty"),se=o("n-layout-content"),ue=o("n-pagination"),K=o("n-layout");return l(),u(K,null,{default:t(()=>[n(F,{class:"header-top"},{default:t(()=>[J("div",null,[Re,d.value?(l(),u(i,{key:0,width:150,sharp:!1,size:"medium"})):(l(),u(q,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[A(" \u5171"+M(e(U))+"\u4F4D\uFF0C\u5DF2\u5C55\u793A"+M(e(k).length)+"\u4F4D ",1)]),_:1},8,["gradient"]))]),d.value?(l(),u(i,{key:0,width:300,sharp:!1,size:"medium"})):(l(),u(ve,{key:1}))]),_:1}),n(K,null,{default:t(()=>[n(F,null,{default:t(()=>[d.value?H((l(),u(c,{key:0,style:r(e(f))},{default:t(()=>[(l(!0),C(T,null,P(new Array(8),(p,h)=>(l(),u(i,{key:h,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[G,e(y)]]):H((l(),u(c,{key:1,class:"space-main",style:r(e(f))},{default:t(()=>{var p,h,j;return[n(x,{value:e(D),"onUpdate:value":Y,options:(p=b.value)==null?void 0:p.star,style:r(m.value?"width: 200px":"")},null,8,["value","options","style"]),n(x,{"render-label":le,value:e(S),"onUpdate:value":Q,options:(h=b.value)==null?void 0:h.weapon,style:r(m.value?"width: 200px":"")},null,8,["value","options","style"]),n(x,{value:e(R),"onUpdate:value":X,options:(j=b.value)==null?void 0:j.element,style:r(m.value?"width: 200px":"")},null,8,["value","options","style"]),n(V,{value:e(z),onKeyup:_e(ee,["enter"]),"onUpdate:value":Z,type:"text",placeholder:"\u641C\u7D22\u89D2\u8272\u540D",style:r(m.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),n(c,{style:r(m.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[n(N,{type:"success",style:{width:"84px"},onClick:g[0]||(g[0]=De=>v(1))},{default:t(()=>[A("\u641C\u7D22")]),_:1}),n(N,{type:"warning",onClick:te},{default:t(()=>[A("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[G,e(y)]]),m.value?ye("",!0):(l(),u(I,{key:2,onClick:g[1]||(g[1]=p=>me(y)?y.value=!e(y):y=!e(y))},{default:t(()=>[A(M(e(y)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),n(se,{"has-sider":""},{default:t(()=>[d.value?(l(),u(c,{key:0,style:r(e(f))},{default:t(()=>[(l(!0),C(T,null,P(new Array(20),(p,h)=>(l(),C("div",{key:h},[n(i,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!d.value&&e(k).length>0?(l(),u(c,{key:1,style:r(e(f))},{default:t(()=>[(l(!0),C(T,null,P(e(k),(p,h)=>(l(),C("div",{key:h},[n(he,{width:e(E),height:e(B),src:p.imgSrc,item:p,mhy_url:p.mhy_URL,wiki_url:p.wiki_URL,objectFit:"contain"},null,8,["width","height","src","item","mhy_url","wiki_url"])]))),128))]),_:1},8,["style"])):(l(),u(c,{key:2,style:r([{width:"100%"},e(f)])},{default:t(()=>[n(ne,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[n(_,null,{default:t(()=>[n(e(ze))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),n(K,{"content-style":"overflow-x: scroll;"},{default:t(()=>[d.value?(l(),u(c,{key:0,style:r(e(f))},{default:t(()=>[n(i,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(l(),u(c,{key:1,style:r(e(f))},{default:t(()=>[n(ue,{page:e(w).pageNum,"page-size":e(w).pageSize,"item-count":e(U),"on-update:page":v,"show-size-picker":"","page-sizes":[10,50,100,150],"on-update:page-size":ae},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{Be as default};
