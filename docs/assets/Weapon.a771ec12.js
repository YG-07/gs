import{d as ue,r as u,C as oe,a as re,D as ie,E as ce,b as s,c as o,w as t,o as n,e as l,f as j,G as b,t as L,h as e,g as M,v as T,n as r,k as C,x as R,y as $,H as pe,l as de,A as me,m as E}from"./index.401e27f2.js";import{W as ve}from"./WavesCard.6799ca8a.js";import{c as _e,z as ye,B as fe,q as ge}from"./index.d639e327.js";import{C as he}from"./CommonIcon.59c19f89.js";import{w as we}from"./waves_select_item.d00489ae.js";import{A as ke}from"./Aperture.bc45313a.js";import"./_plugin-vue_export-helper.cdc0426e.js";const xe=j("h2",null,"\u6B66\u5668",-1),Ee=ue({__name:"Weapon",setup(Ce){const y=u(_e()),d=u(!1),I=oe(),G=re();let H=!0,w=u({pageNum:1,pageSize:100}),m=u(H),z=u(""),S=u(-2),D=u(-2),A=u(-2),B=u(0),k=u([]),f=u(`
    ${y.value?"margin: 20px;":"margin:2px; gap: 8px 5px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const P=a=>{S.value=a,v(1)},J=a=>{D.value=a,v(1)},O=a=>{A.value=a,v(1)},Q=a=>{z.value=a},X=a=>{v(1)},Y=()=>{z.value="",D.value=S.value=A.value=-2,v(1)},Z=a=>{w.value.pageSize=a,v(1)},ee=a=>[E("div",{style:{display:"flex",alignItems:"center"}},{default:()=>[a.value>-1?E(he,{url:we[a.value].icon_url,size:30},{default:()=>E("")}):void 0,E("span",{},{default:()=>a.label})]})],F=u({}),q=async()=>{I.start(),d.value=!0;let a={name:z.value,item:S.value,weapon:D.value,star:A.value,page:w.value},{code:h,data:c,msg:U}=await fe(a);if(h!=200){G.error(U),setTimeout(()=>{I.finish()},500),d.value=!1;return}B.value=c.total;const{waves_base:N,waves_url:i}=await ge(),x=`${N}${i}`;k.value=c==null?void 0:c.records.map(g=>(g.surl=x.replace("{id}",g.url),g.imgSrc=g.icon_url,g)),setTimeout(()=>{I.finish()},500),d.value=!1},v=async a=>{w.value.pageNum=a,k.value=[],B.value=0,q()};return ie(async()=>{F.value=await ye()}),ce(()=>{q()}),(a,h)=>{const c=s("n-skeleton"),U=s("n-gradient-text"),N=s("n-layout-header"),i=s("n-space"),x=s("n-select"),g=s("n-input"),V=s("n-button"),te=s("n-divider"),ae=s("n-icon"),le=s("n-empty"),ne=s("n-layout-content"),se=s("n-pagination"),W=s("n-layout");return n(),o(W,null,{default:t(()=>[l(N,{class:"header-top"},{default:t(()=>[j("div",null,[xe,d.value?(n(),o(c,{key:0,width:150,sharp:!1,size:"medium"})):(n(),o(U,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[b(" \u5171"+L(e(B))+"\u4F4D\uFF0C\u5DF2\u5C55\u793A"+L(e(k).length)+"\u4E2A ",1)]),_:1},8,["gradient"]))])]),_:1}),l(W,null,{default:t(()=>[l(N,null,{default:t(()=>[d.value?M((n(),o(i,{key:0,style:r(e(f))},{default:t(()=>[(n(!0),C($,null,R(new Array(8),(p,_)=>(n(),o(c,{key:_,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[T,e(m)]]):M((n(),o(i,{key:1,class:"space-main",style:r(e(f))},{default:t(()=>{var p,_,K;return[l(x,{value:e(A),"onUpdate:value":O,options:(p=F.value)==null?void 0:p.star,style:r(y.value?"width: 200px":"")},null,8,["value","options","style"]),l(x,{value:e(D),"onUpdate:value":J,options:(_=F.value)==null?void 0:_.weapon,style:r(y.value?"width: 200px":"")},null,8,["value","options","style"]),l(x,{"render-label":ee,value:e(S),"onUpdate:value":P,options:(K=F.value)==null?void 0:K.item,style:r(y.value?"width: 200px":"")},null,8,["value","options","style"]),l(g,{value:e(z),onKeyup:pe(X,["enter"]),"onUpdate:value":Q,type:"text",placeholder:"\u641C\u7D22\u6B66\u5668\u540D",style:r(y.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),l(i,{style:r(y.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[l(V,{type:"success",style:{width:"84px"},onClick:h[0]||(h[0]=ze=>v(1))},{default:t(()=>[b("\u641C\u7D22")]),_:1}),l(V,{type:"warning",onClick:Y},{default:t(()=>[b("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[T,e(m)]]),y.value?me("",!0):(n(),o(te,{key:2,onClick:h[1]||(h[1]=p=>de(m)?m.value=!e(m):m=!e(m))},{default:t(()=>[b(L(e(m)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),l(ne,{"has-sider":""},{default:t(()=>[d.value?(n(),o(i,{key:0,style:r(e(f))},{default:t(()=>[(n(!0),C($,null,R(new Array(20),(p,_)=>(n(),C("div",{key:_},[l(c,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!d.value&&e(k).length>0?(n(),o(i,{key:1,style:r(e(f))},{default:t(()=>[(n(!0),C($,null,R(e(k),(p,_)=>(n(),C("div",{key:_},[l(ve,{src:p.imgSrc,item:p,url:p.surl},null,8,["src","item","url"])]))),128))]),_:1},8,["style"])):(n(),o(i,{key:2,style:r([{width:"100%"},e(f)])},{default:t(()=>[l(le,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[l(ae,null,{default:t(()=>[l(e(ke))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),l(W,{"content-style":"overflow-x: scroll;"},{default:t(()=>[d.value?(n(),o(i,{key:0,style:r(e(f))},{default:t(()=>[l(c,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(n(),o(i,{key:1,style:r(e(f))},{default:t(()=>[l(se,{page:e(w).pageNum,"page-size":e(w).pageSize,"item-count":e(B),"on-update:page":v,"show-size-picker":"","page-sizes":[10,50,100,150],"on-update:page-size":Z},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{Ee as default};
