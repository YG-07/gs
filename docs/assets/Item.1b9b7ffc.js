import{d as le,r as s,C as ne,a as ue,D as se,E as oe,b as o,c as u,w as t,o as a,e as l,f as j,G as E,t as V,h as e,g as T,v as G,n as i,k as C,x as K,y as M,H as ie,l as re,A as ce}from"./index.401e27f2.js";import{U as pe,P as me}from"./UrlSelect.99668f62.js";import{c as de,a as _e,f as ye,q as ve}from"./index.d639e327.js";import{A as he}from"./Aperture.bc45313a.js";import"./_plugin-vue_export-helper.cdc0426e.js";const fe=j("h2",null,"\u6B66\u5668\u7A81\u7834\u6750\u6599",-1),Se=le({__name:"Item",setup(ge){const h=s(de()),m=s(!1),I=ne(),H=ue();let _=s(!0),z=s(""),A=s(-2),b=s(-2),B=s(-2),k=s({pageNum:1,pageSize:100}),S=s(0),w=s([]),f=s(`
    ${h.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const W=n=>{A.value=n,y(1)},J=n=>{b.value=n,y(1)},O=n=>{B.value=n,y(1)},Q=n=>{z.value=n},X=n=>{y(1)},Y=()=>{z.value="",A.value=-2,y(1)},Z=n=>{k.value.pageSize=n,y(1)};s({});const D=s({}),P=async()=>{I.start(),m.value=!0;let n={name:z.value,star:A.value,week:B.value,item:b.value,page:k.value},{code:g,data:r,msg:F}=await ye(n);if(g!=200){H.error(F),setTimeout(()=>{I.finish()},500),m.value=!1;return}S.value=r.total;const{mhy_base:N,mhy_url:c,wiki_base:x,wiki_book_item:$}=await ve(),U=`${N}${c}`,L=`${x}${$}`;w.value=r==null?void 0:r.records.map(d=>(d.mhy_url=U.replace("{id}",d.mhy_url),d.wiki_url=L.replace("{id}",d.wiki_url),d.imgSrc=d.icon_url,d)),setTimeout(()=>{I.finish()},500),m.value=!1},y=async n=>{k.value.pageNum=n,w.value=[],S.value=0,P()};return se(async()=>{D.value=await _e()}),oe(()=>{P()}),(n,g)=>{const r=o("n-skeleton"),F=o("n-gradient-text"),N=o("n-layout-header"),c=o("n-space"),x=o("n-select"),$=o("n-input"),U=o("n-button"),L=o("n-divider"),d=o("n-icon"),ee=o("n-empty"),te=o("n-layout-content"),ae=o("n-pagination"),q=o("n-layout");return a(),u(q,null,{default:t(()=>[l(N,{class:"header-top"},{default:t(()=>[j("div",null,[fe,m.value?(a(),u(r,{key:0,width:150,sharp:!1,size:"medium"})):(a(),u(F,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[E(" \u5171"+V(e(S))+"\u4E2A\uFF0C\u5DF2\u5C55\u793A"+V(e(w).length)+"\u4E2A ",1)]),_:1},8,["gradient"]))]),m.value?(a(),u(r,{key:0,width:300,sharp:!1,size:"medium"})):(a(),u(pe,{key:1}))]),_:1}),l(q,null,{default:t(()=>[l(N,null,{default:t(()=>[m.value?T((a(),u(c,{key:0,style:i(e(f))},{default:t(()=>[(a(!0),C(M,null,K(new Array(8),(p,v)=>(a(),u(r,{key:v,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[G,e(_)]]):T((a(),u(c,{key:1,class:"space-main",style:i(e(f))},{default:t(()=>{var p,v,R;return[l(x,{value:e(A),"onUpdate:value":W,options:(p=D.value)==null?void 0:p.star,style:i(h.value?"width: 200px":"")},null,8,["value","options","style"]),l(x,{value:e(B),"onUpdate:value":O,options:(v=D.value)==null?void 0:v.week,style:i(h.value?"width: 200px":"")},null,8,["value","options","style"]),l(x,{value:e(b),"onUpdate:value":J,options:(R=D.value)==null?void 0:R.item,style:i(h.value?"width: 200px":"")},null,8,["value","options","style"]),l($,{value:e(z),onKeyup:ie(X,["enter"]),"onUpdate:value":Q,type:"text",placeholder:"\u641C\u7D22\u7A81\u7834\u6750\u6599\u540D",style:i(h.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),l(c,{style:i(h.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[l(U,{type:"success",style:{width:"84px"},onClick:g[0]||(g[0]=ke=>y(1))},{default:t(()=>[E("\u641C\u7D22")]),_:1}),l(U,{type:"warning",onClick:Y},{default:t(()=>[E("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[G,e(_)]]),h.value?ce("",!0):(a(),u(L,{key:2,onClick:g[1]||(g[1]=p=>re(_)?_.value=!e(_):_=!e(_))},{default:t(()=>[E(V(e(_)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),l(te,{"has-sider":""},{default:t(()=>[m.value?(a(),u(c,{key:0,style:i(e(f))},{default:t(()=>[(a(!0),C(M,null,K(new Array(20),(p,v)=>(a(),C("div",{key:v},[l(r,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!m.value&&e(w).length>0?(a(),u(c,{key:1,style:i(e(f))},{default:t(()=>[(a(!0),C(M,null,K(e(w),(p,v)=>(a(),C("div",{key:v},[l(me,{round:"0.75rem",src:p.imgSrc,item:p,mhy_url:p.mhy_url,wiki_url:p.wiki_url},null,8,["src","item","mhy_url","wiki_url"])]))),128))]),_:1},8,["style"])):(a(),u(c,{key:2,style:i([{width:"100%"},e(f)])},{default:t(()=>[l(ee,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[l(d,null,{default:t(()=>[l(e(he))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),l(q,{"content-style":"overflow-x: scroll;"},{default:t(()=>[m.value?(a(),u(c,{key:0,style:i(e(f))},{default:t(()=>[l(r,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(a(),u(c,{key:1,style:i(e(f))},{default:t(()=>[l(ae,{page:e(k).pageNum,"page-size":e(k).pageSize,"item-count":e(S),"on-update:page":y,"show-size-picker":"","page-sizes":[10,50,70,100],"on-update:page-size":Z},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{Se as default};
