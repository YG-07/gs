import{d as Q,r as p,C as W,a as X,D as Y,E as Z,b as u,c as l,w as t,o as a,e as n,f as $,G as B,t as L,h as e,g as U,v as R,n as d,k as w,x as b,y as E,H as ee,l as te,A as ae}from"./index.401e27f2.js";import{B as ne,a as le}from"./BlueUrlSelect.c6b07461.js";import{c as se,u as ue,w as oe,q as ie}from"./index.d639e327.js";import{A as re}from"./Aperture.bc45313a.js";import"./_plugin-vue_export-helper.cdc0426e.js";const ce=$("h2",null,"NPC\u548C\u536B\u661F",-1),ge=Q({__name:"npc",setup(pe){const C=p(se()),r=p(!1),D=W(),q=X();let _=p(!0),x=p(""),g=p({pageNum:1,pageSize:100}),z=p(0),v=p([]),y=p(`
    ${C.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const V=c=>{x.value=c},K=c=>{h(1)},M=()=>{x.value="",h(1)},I=c=>{g.value.pageSize=c,h(1)},j=p({}),P=async()=>{D.start(),r.value=!0;let c={name:x.value,page:g.value},{code:f,data:o,msg:F}=await oe(c);if(f!=200){q.error(F),D.finish(),r.value=!1;return}z.value=o.total;const{blue_archive_base:N,blue_archive_detail:i}=await ie(),S=`${N}${i}`;v.value=o==null?void 0:o.records.map(s=>(s.wiki_URL=S.replace("{id}",s.url),s.imgSrc=s.icon_url,s.imgList=[],s.img_urls&&(s.imgList=s.img_urls.split(",")),s)),D.finish(),r.value=!1},h=async c=>{g.value.pageNum=c,v.value=[],z.value=0,P()};return Y(async()=>{j.value=await ue()}),Z(()=>{P()}),(c,f)=>{const o=u("n-skeleton"),F=u("n-gradient-text"),N=u("n-layout-header"),i=u("n-space"),S=u("n-input"),s=u("n-button"),G=u("n-divider"),H=u("n-icon"),T=u("n-empty"),J=u("n-layout-content"),O=u("n-pagination"),A=u("n-layout");return a(),l(A,null,{default:t(()=>[n(N,{class:"header-top"},{default:t(()=>[$("div",null,[ce,r.value?(a(),l(o,{key:0,width:150,sharp:!1,size:"medium"})):(a(),l(F,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[B(" \u5171"+L(e(z))+"\u4F4D\uFF0C\u5DF2\u5C55\u793A"+L(e(v).length)+"\u4F4D ",1)]),_:1},8,["gradient"]))]),r.value?(a(),l(o,{key:0,width:300,sharp:!1,size:"medium"})):(a(),l(ne,{key:1}))]),_:1}),n(A,null,{default:t(()=>[n(N,null,{default:t(()=>[r.value?U((a(),l(i,{key:0,style:d(e(y))},{default:t(()=>[(a(!0),w(E,null,b(new Array(4),(m,k)=>(a(),l(o,{key:k,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[R,e(_)]]):U((a(),l(i,{key:1,class:"space-main",style:d(e(y))},{default:t(()=>[n(S,{value:e(x),onKeyup:ee(K,["enter"]),"onUpdate:value":V,type:"text",placeholder:"\u641C\u7D22NPC\u6216\u536B\u661F\u7684\u540D\u79F0",style:d(C.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),n(i,{style:d(C.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[n(s,{type:"success",style:{width:"84px"},onClick:f[0]||(f[0]=m=>h(1))},{default:t(()=>[B("\u641C\u7D22")]),_:1}),n(s,{type:"warning",onClick:M},{default:t(()=>[B("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]),_:1},8,["style"])),[[R,e(_)]]),C.value?ae("",!0):(a(),l(G,{key:2,onClick:f[1]||(f[1]=m=>te(_)?_.value=!e(_):_=!e(_))},{default:t(()=>[B(L(e(_)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),n(J,{"has-sider":""},{default:t(()=>[r.value?(a(),l(i,{key:0,style:d(e(y))},{default:t(()=>[(a(!0),w(E,null,b(new Array(20),(m,k)=>(a(),w("div",{key:k},[n(o,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!r.value&&e(v).length>0?(a(),l(i,{key:1,style:d(e(y))},{default:t(()=>[(a(!0),w(E,null,b(e(v),(m,k)=>(a(),w("div",{key:k},[n(le,{src:m.imgSrc,item:m,url:m.wiki_URL,"img-list":m.imgList},null,8,["src","item","url","img-list"])]))),128))]),_:1},8,["style"])):(a(),l(i,{key:2,style:d([{width:"100%"},e(y)])},{default:t(()=>[n(T,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[n(H,null,{default:t(()=>[n(e(re))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),n(A,{"content-style":"overflow-x: scroll;"},{default:t(()=>[r.value?(a(),l(i,{key:0,style:d(e(y))},{default:t(()=>[n(o,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(a(),l(i,{key:1,style:d(e(y))},{default:t(()=>[n(O,{page:e(g).pageNum,"page-size":e(g).pageSize,"item-count":e(z),"on-update:page":h,"show-size-picker":"","page-sizes":[10,50,100,150],"on-update:page-size":I},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{ge as default};
