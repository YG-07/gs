import{d as re,r as s,C as ce,a as pe,D as de,E as ve,b as u,c as i,w as l,P as me,o as n,e as a,f as G,G as U,t as q,h as t,g as P,v as j,n as o,k as E,x as I,y as V,H as _e,l as ye,A as fe,m as B}from"./index.401e27f2.js";import{W as he}from"./WavesCard.6799ca8a.js";import{c as ge,z as we,E as ke,q as xe,F as Ce}from"./index.d639e327.js";import{C as ze}from"./CommonIcon.59c19f89.js";import{A as Ee}from"./Aperture.bc45313a.js";import"./_plugin-vue_export-helper.cdc0426e.js";const Se=G("h2",null,"\u58F0\u9AB8",-1),Re=re({__name:"Echoes",setup(Ae){const v=s(ge()),m=s(!1),L=ce(),H=pe();let J=!0,k=s({pageNum:1,pageSize:100}),_=s(J),S=s(""),A=s(-2),D=s(-2),x=s([-2]),F=s(-2),b=s(0),C=s([]),h=s(`
    ${v.value?"margin: 20px;":"margin:2px; gap: 8px 5px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const O=e=>{A.value=e,c(1)},Q=e=>{D.value=e,c(1)},X=e=>{e.includes(-2)&&e.length>1?x.value=e.filter(y=>y!=-2):x.value=e.length>0?e:[-2],c(1)},Y=e=>{F.value=e,c(1)},Z=e=>{S.value=e},ee=e=>{c(1)},te=()=>{S.value="",x.value=[],D.value=F.value=A.value=-2,c(1)},le=e=>{k.value.pageSize=e,c(1)},ae=e=>[B("div",{style:{display:"flex",alignItems:"center"}},{default:()=>[e.value>-1?B(ze,{url:Ce[e.value].icon_url,size:30},{default:()=>B("")}):void 0,B("span",{},{default:()=>e.label})]})],z=s({}),W=async()=>{L.start(),m.value=!0;let e={name:S.value,level:A.value,suit:me(x.value),cost:D.value,unusual:F.value,page:k.value};console.log(e,"p");let{code:y,data:p,msg:R}=await ke(e);if(y!=200){H.error(R),setTimeout(()=>{L.finish()},500),m.value=!1;return}b.value=p.total;const{waves_base:N,waves_url:r}=await xe(),w=`${N}${r}`;C.value=p==null?void 0:p.records.map(g=>(g.surl=w.replace("{id}",g.url),g.imgSrc=g.icon_url,g)),setTimeout(()=>{L.finish()},500),m.value=!1},c=async e=>{k.value.pageNum=e,C.value=[],b.value=0,W()};return de(async()=>{z.value=await we()}),ve(()=>{W()}),(e,y)=>{const p=u("n-skeleton"),R=u("n-gradient-text"),N=u("n-layout-header"),r=u("n-space"),w=u("n-select"),g=u("n-input"),K=u("n-button"),ne=u("n-divider"),se=u("n-icon"),ue=u("n-empty"),oe=u("n-layout-content"),ie=u("n-pagination"),$=u("n-layout");return n(),i($,null,{default:l(()=>[a(N,{class:"header-top"},{default:l(()=>[G("div",null,[Se,m.value?(n(),i(p,{key:0,width:150,sharp:!1,size:"medium"})):(n(),i(R,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:l(()=>[U(" \u5171"+q(t(b))+"\u4F4D\uFF0C\u5DF2\u5C55\u793A"+q(t(C).length)+"\u4E2A ",1)]),_:1},8,["gradient"]))])]),_:1}),a($,null,{default:l(()=>[a(N,null,{default:l(()=>[m.value?P((n(),i(r,{key:0,style:o(t(h))},{default:l(()=>[(n(!0),E(V,null,I(new Array(8),(d,f)=>(n(),i(p,{key:f,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[j,t(_)]]):P((n(),i(r,{key:1,class:"space-main",style:o(t(h))},{default:l(()=>{var d,f,M,T;return[a(w,{value:t(A),"onUpdate:value":O,options:(d=z.value)==null?void 0:d.level,style:o(v.value?"width: 200px":"")},null,8,["value","options","style"]),a(w,{multiple:"",clearable:"","render-label":ae,value:t(x),"onUpdate:value":X,options:(f=z.value)==null?void 0:f.suit,style:o(v.value?"width: 200px":"")},null,8,["value","options","style"]),a(w,{value:t(D),"onUpdate:value":Q,options:(M=z.value)==null?void 0:M.cost,style:o(v.value?"width: 200px":"")},null,8,["value","options","style"]),a(w,{value:t(F),"onUpdate:value":Y,options:(T=z.value)==null?void 0:T.unusual,style:o(v.value?"width: 200px":"")},null,8,["value","options","style"]),a(g,{value:t(S),onKeyup:_e(ee,["enter"]),"onUpdate:value":Z,type:"text",placeholder:"\u641C\u7D22\u7269\u54C1\u540D",style:o(v.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),a(r,{style:o(v.value?"flex:1;":"min-width: 200px;")},{default:l(()=>[a(K,{type:"success",style:{width:"84px"},onClick:y[0]||(y[0]=De=>c(1))},{default:l(()=>[U("\u641C\u7D22")]),_:1}),a(K,{type:"warning",onClick:te},{default:l(()=>[U("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[j,t(_)]]),v.value?fe("",!0):(n(),i(ne,{key:2,onClick:y[1]||(y[1]=d=>ye(_)?_.value=!t(_):_=!t(_))},{default:l(()=>[U(q(t(_)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),a(oe,{"has-sider":""},{default:l(()=>[m.value?(n(),i(r,{key:0,style:o(t(h))},{default:l(()=>[(n(!0),E(V,null,I(new Array(20),(d,f)=>(n(),E("div",{key:f},[a(p,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!m.value&&t(C).length>0?(n(),i(r,{key:1,style:o(t(h))},{default:l(()=>[(n(!0),E(V,null,I(t(C),(d,f)=>(n(),E("div",{key:f},[a(he,{src:d.imgSrc,item:d,url:d.surl},null,8,["src","item","url"])]))),128))]),_:1},8,["style"])):(n(),i(r,{key:2,style:o([{width:"100%"},t(h)])},{default:l(()=>[a(ue,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:l(()=>[a(se,null,{default:l(()=>[a(t(Ee))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),a($,{"content-style":"overflow-x: scroll;"},{default:l(()=>[m.value?(n(),i(r,{key:0,style:o(t(h))},{default:l(()=>[a(p,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(n(),i(r,{key:1,style:o(t(h))},{default:l(()=>[a(ie,{page:t(k).pageNum,"page-size":t(k).pageSize,"item-count":t(b),"on-update:page":c,"show-size-picker":"","page-sizes":[10,50,100,150],"on-update:page-size":le},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{Re as default};
