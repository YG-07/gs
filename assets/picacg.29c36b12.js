import{d as ve,r as i,z as fe,a as ge,u as we,L as ke,I as W,B as xe,b as u,c as s,w as t,o as a,e as l,f as C,q as k,t as x,h as e,g as X,v as Y,n as o,k as _,C as b,D as S,E as Ce,l as De,x as Z,p as Be,i as Ae}from"./index.7fd40ef4.js";import{c as be,x as Se,y as Fe}from"./index.569b1bd1.js";import{A as ee}from"./Aperture.a9bd491a.js";import{_ as Ee}from"./_plugin-vue_export-helper.cdc0426e.js";const ze=F=>(Be("data-v-21718206"),F=F(),Ae(),F),Le=ze(()=>C("h2",null,"\u78A7\u84DD\u6863\u6848\u6F2B\u753B",-1)),Ne={key:0,style:{width:"100%"}},Ie={class:"card-info"},je={class:"img-area"},qe={class:"title"},Pe={key:1,style:{width:"100%"}},Re={key:0,style:{width:"100%"}},$e={style:{width:"100%","text-align":"center"}},Ve=ve({__name:"picacg",setup(F){var M;const te="https://via.placeholder.com/180x280/ccc/fff.jpg&text=NO%20COVER",h=i(be()),c=i(!1),D=fe(),V=ge(),T=we(),E=ke();let y=i(`
    ${h.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `),ae=i(`
    ${h.value?"width:180px;":"width:38vw;"}
    ${h.value?"height:280px;":"height:60vw;"}
  `);const le=i("width:100%; height:100%;"),ne=i(`
    width:100%;
    object-fit: cover;
    max-height: calc(${h.value?"280px":"60vw"} - 5em);
  `),I=i(`
    ${h.value?"width:50%;":"width:100%;"}
    margin-bottom: 1em;
  `);let z=i(!0),f=i(null),B=i([]),j=i([]),L=i({}),m=i(!0),N=i(""),q=i("");(M=T.query)!=null&&M.id&&(f.value=T.query.id,z.value=!1);const se=n=>{N.value=n},U=n=>{q.value=N.value},ue=()=>{N.value="",q.value=""},oe=async()=>{D.start(),c.value=!0;let{code:n,data:p,msg:r}=await Se();if(n!=200){V.error(r),setTimeout(()=>{D.finish()},500),c.value=!1;return}B.value=p.map(g=>(L.value[g.id]=g,g)),setTimeout(()=>{D.finish()},500),c.value=!1},ie=async()=>{D.start(),c.value=!0;let{code:n,data:p,msg:r}=await Fe();if(n!=200){V.error(r),setTimeout(()=>{D.finish()},500),c.value=!1;return}j.value=p,setTimeout(()=>{D.finish()},500),c.value=!1},ce=n=>{z.value=!1,f.value=n.id,E.push({...E.currentRoute.value,query:{id:n.id}})},P=()=>{z.value=!0,E.push({...E.currentRoute.value,query:{}})},re=()=>{B.value=B.value.map(n=>{let p=te,r=j.value.find(g=>g.book==n.id);return r&&(p=r.img_url),{...n,url:p}})},R=W(()=>B.value.filter(n=>n.book_name.includes(q.value))),K=W(()=>f.value?j.value.filter(n=>n.book==f.value):[]);return xe(async()=>{await ie(),await oe(),await re()}),(n,p)=>{const r=u("n-skeleton"),g=u("n-gradient-text"),de=u("BlueUrlSelect"),O=u("n-layout-header"),w=u("n-space"),_e=u("n-input"),A=u("n-button"),ye=u("n-divider"),G=u("n-image"),pe=u("n-card"),H=u("n-icon"),J=u("n-empty"),$=u("n-flex"),he=u("n-image-group"),me=u("n-layout-content"),Q=u("n-layout");return a(),s(Q,null,{default:t(()=>[l(O,{class:"header-top"},{default:t(()=>[C("div",null,[Le,c.value?(a(),s(r,{key:0,width:150,sharp:!1,size:"medium"})):(a(),s(g,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[k(" \u5171"+x(e(B).length)+"\u672C\uFF0C\u5DF2\u5C55\u793A"+x(e(R).length)+"\u672C ",1)]),_:1},8,["gradient"]))]),c.value?(a(),s(r,{key:0,width:300,sharp:!1,size:"medium"})):(a(),s(de,{key:1}))]),_:1}),l(Q,null,{default:t(()=>[l(O,null,{default:t(()=>[c.value?X((a(),s(w,{key:0,style:o(e(y))},{default:t(()=>[(a(!0),_(S,null,b(new Array(4),(d,v)=>(a(),s(r,{key:v,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[Y,e(m)]]):X((a(),s(w,{key:1,class:"space-main",style:o(e(y))},{default:t(()=>[l(_e,{value:e(N),onKeyup:Ce(U,["enter"]),"onUpdate:value":se,type:"text",placeholder:"\u641C\u7D22\u6F2B\u753B\u540D\u79F0",style:o(h.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),l(w,{style:o(h.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[l(A,{type:"success",style:{width:"84px"},onClick:U},{default:t(()=>[k("\u641C\u7D22")]),_:1}),l(A,{type:"warning",onClick:ue},{default:t(()=>[k("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]),_:1},8,["style"])),[[Y,e(m)]]),h.value?Z("",!0):(a(),s(ye,{key:2,onClick:p[0]||(p[0]=d=>De(m)?m.value=!e(m):m=!e(m))},{default:t(()=>[k(x(e(m)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),l(me,{"has-sider":""},{default:t(()=>[e(z)?(a(),_("div",Ne,[c.value?(a(),s(w,{key:0,style:o(e(y))},{default:t(()=>[(a(!0),_(S,null,b(new Array(20),(d,v)=>(a(),_("div",{key:v},[l(r,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!c.value&&e(R).length>0?(a(),s(w,{key:1,style:o([e(y),{"justify-content":"left"}])},{default:t(()=>[(a(!0),_(S,null,b(e(R),(d,v)=>(a(),s(pe,{hoverable:"",style:o(e(ae)),"content-style":"padding: 0;",onClick:Te=>ce(d)},{default:t(()=>[C("div",Ie,[C("div",je,[l(G,{src:d.url,"object-fit":"cover",lazy:"","img-props":{style:ne.value},style:o(le.value)},null,8,["src","img-props","style"])]),C("div",qe," ("+x(d.total)+"P)"+x(d.book_name),1)])]),_:2},1032,["style","onClick"]))),256))]),_:1},8,["style"])):(a(),s(w,{key:2,style:o([{width:"100%"},e(y)])},{default:t(()=>[l(J,{description:"\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[l(H,null,{default:t(()=>[l(e(ee))]),_:1})]),_:1})]),_:1},8,["style"]))])):(a(),_("div",Pe,[c.value?(a(),s(w,{key:0,style:o(e(y))},{default:t(()=>[(a(!0),_(S,null,b(new Array(20),(d,v)=>(a(),_("div",{key:v},[l(r,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!c.value&&e(K).length>0?(a(),s($,{key:1,vertical:"",style:o([{width:"98%"},e(y)])},{default:t(()=>[e(L)[e(f)]?(a(),_("div",Re,[C("h3",$e,x(e(L)[e(f)].book_name)+" ("+x(e(L)[e(f)].total)+"P)",1)])):Z("",!0),C("div",{style:o([{width:"100%"},e(y)])},[l(A,{style:o(I.value),type:"info",ghost:"",onClick:P},{default:t(()=>[k("\u8FD4\u56DE")]),_:1},8,["style"]),l(he,null,{default:t(()=>[l($,{vertical:""},{default:t(()=>[(a(!0),_(S,null,b(e(K),(d,v)=>(a(),s(G,{"object-fit":"contain",key:v,src:d.img_url,lazy:"",style:{width:"100%",height:"100vw","margin-bottom":"3px",display:"flex","justify-content":"center"}},null,8,["src"]))),128))]),_:1})]),_:1}),l(A,{style:o(I.value),type:"info",ghost:"",onClick:P},{default:t(()=>[k("\u8FD4\u56DE")]),_:1},8,["style"])],4)]),_:1},8,["style"])):(a(),s($,{key:2,vertical:"",style:o([{width:"98%"},e(y)])},{default:t(()=>[l(A,{style:o(I.value),type:"info",ghost:"",onClick:P},{default:t(()=>[k("\u8FD4\u56DE")]),_:1},8,["style"]),l(J,{description:"\u6570\u636E\u4E3A\u7A7A",style:{width:"100%","margin-top":"2em"}},{icon:t(()=>[l(H,null,{default:t(()=>[l(e(ee))]),_:1})]),_:1})]),_:1},8,["style"]))]))]),_:1})]),_:1})]),_:1})}}});const Ge=Ee(Ve,[["__scopeId","data-v-21718206"]]);export{Ge as default};
