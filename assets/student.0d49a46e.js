import{d as xe,r as u,z as De,a as Se,A as be,B as Ae,b as p,c as i,w as l,o as n,e as a,f as ae,q as E,t as K,h as t,g as ee,v as te,n as s,k as D,C as P,D as j,E as Fe,l as ze,x as Be,m as U}from"./index.7c147e39.js";import{B as Ee,a as Ue}from"./BlueUrlSelect.17f342bc.js";import{c as Le,u as Ne,v as Re,q as qe}from"./index.4e93bc07.js";import{C as $e}from"./CommonIcon.1cbaef55.js";import{A as Ie}from"./Aperture.8ca3e0e5.js";import"./_plugin-vue_export-helper.cdc0426e.js";const Me=[{id:0,name:"\u963F\u62DC\u591A\u65AF",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/169570.png"},{id:1,name:"\u683C\u9ED1\u5A1C",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/824731.png"},{id:2,name:"\u4E09\u4E00",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/869881.png"},{id:3,name:"\u5343\u5E74\u79D1\u5B66",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/873884.png"},{id:4,name:"\u767E\u9B3C\u591C\u884C",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/342619.png"},{id:5,name:"\u5C71\u6D77\u7ECF",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/394261.png"},{id:6,name:"\u963F\u91CC\u4E4C\u65AF",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/302051.png"},{id:7,name:"\u8D64\u51AC",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_688/h_624/829/43637/2023/7/4/747305.png"},{id:8,name:"SRT",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_688/h_624/829/43637/2023/7/4/529744.png"},{id:9,name:"\u74E6\u5C14\u57FA\u91CC",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_688/h_624/829/43637/2023/7/4/401437.png"},{id:10,name:"\u5176\u4ED6",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_688/h_624/829/43637/2023/7/4/120452.png"}],Te=ae("h2",null,"\u5B66\u751F",-1),Oe=xe({__name:"student",setup(Ve){const c=u(Le()),h=u(!1),L=De(),le=Se();let y=u(!0),S=u(""),b=u(-2),A=u(-2),F=u(-2),N=u(-2),R=u(-2),q=u(-2),$=u(-2),I=u(-2),M=u(-2),C=u({pageNum:1,pageSize:100}),z=u(0),x=u([]),f=u(`
    ${c.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const ne=e=>{b.value=e,o(1)},ue=e=>{A.value=e,o(1)},se=e=>{N.value=e,o(1)},oe=e=>{R.value=e,o(1)},ie=e=>{q.value=e,o(1)},ce=e=>{$.value=e,o(1)},pe=e=>{I.value=e,o(1)},re=e=>{M.value=e,o(1)},de=e=>{F.value=e,o(1)},me=e=>{S.value=e},ve=e=>{o(1)},_e=()=>{S.value="",b.value=A.value=F.value=-2,o(1)},ge=e=>{C.value.pageSize=e,o(1)},he=e=>[U("div",{style:{display:"flex",alignItems:"center"}},{default:()=>[e.value>-1?U($e,{url:Me[e.value].icon_url,size:30},{default:()=>U("")}):void 0,U("span",{},{default:()=>e.label})]})],m=u({}),G=async()=>{L.start(),h.value=!0;let e={name:S.value,position:b.value,weapon:A.value,star:F.value,school:N.value,club:R.value,attack:q.value,defense:$.value,map_get:I.value,banner:M.value,page:C.value},{code:k,data:v,msg:T}=await Re(e);if(k!=200){le.error(T),setTimeout(()=>{L.finish()},500),h.value=!1;return}z.value=v.total;const{blue_archive_base:B,blue_archive_detail:_}=await qe(),r=`${B}${_}`;x.value=v==null?void 0:v.records.map(d=>(d.wiki_URL=r.replace("{id}",d.url),d.imgSrc=d.icon_url,d.imgList=[],d.img_urls&&(d.imgList=d.img_urls.split(",")),d)),setTimeout(()=>{L.finish()},500),h.value=!1},o=async e=>{C.value.pageNum=e,x.value=[],z.value=0,G()};return be(async()=>{m.value=await Ne()}),Ae(()=>{G()}),(e,k)=>{const v=p("n-skeleton"),T=p("n-gradient-text"),B=p("n-layout-header"),_=p("n-space"),r=p("n-select"),d=p("n-input"),W=p("n-button"),ye=p("n-divider"),we=p("n-icon"),fe=p("n-empty"),ke=p("n-layout-content"),Ce=p("n-pagination"),V=p("n-layout");return n(),i(V,null,{default:l(()=>[a(B,{class:"header-top"},{default:l(()=>[ae("div",null,[Te,h.value?(n(),i(v,{key:0,width:150,sharp:!1,size:"medium"})):(n(),i(T,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:l(()=>[E(" \u5171"+K(t(z))+"\u4F4D\uFF0C\u5DF2\u5C55\u793A"+K(t(x).length)+"\u4F4D ",1)]),_:1},8,["gradient"]))]),h.value?(n(),i(v,{key:0,width:300,sharp:!1,size:"medium"})):(n(),i(Ee,{key:1}))]),_:1}),a(V,null,{default:l(()=>[a(B,null,{default:l(()=>[h.value?ee((n(),i(_,{key:0,style:s(t(f))},{default:l(()=>[(n(!0),D(j,null,P(new Array(8),(g,w)=>(n(),i(v,{key:w,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[te,t(y)]]):ee((n(),i(_,{key:1,class:"space-main",style:s(t(f))},{default:l(()=>{var g,w,H,J,O,Q,X,Y,Z;return[a(r,{value:t(F),"onUpdate:value":de,options:(g=m.value)==null?void 0:g.star,style:s(c.value?"width: 200px":"")},null,8,["value","options","style"]),a(r,{value:t(b),"onUpdate:value":ne,options:(w=m.value)==null?void 0:w.position,style:s(c.value?"width: 200px":"")},null,8,["value","options","style"]),a(r,{value:t(A),"onUpdate:value":ue,options:(H=m.value)==null?void 0:H.weapon,style:s(c.value?"width: 200px":"")},null,8,["value","options","style"]),a(r,{"render-label":he,value:t(N),"onUpdate:value":se,options:(J=m.value)==null?void 0:J.school,style:s(c.value?"width: 200px":"")},null,8,["value","options","style"]),a(r,{value:t(R),"onUpdate:value":oe,options:(O=m.value)==null?void 0:O.club,style:s(c.value?"width: 200px":"")},null,8,["value","options","style"]),a(r,{value:t(q),"onUpdate:value":ie,options:(Q=m.value)==null?void 0:Q.attack,style:s(c.value?"width: 200px":"")},null,8,["value","options","style"]),a(r,{value:t($),"onUpdate:value":ce,options:(X=m.value)==null?void 0:X.defense,style:s(c.value?"width: 200px":"")},null,8,["value","options","style"]),a(r,{value:t(I),"onUpdate:value":pe,options:(Y=m.value)==null?void 0:Y.map_get,style:s(c.value?"width: 200px":"")},null,8,["value","options","style"]),a(r,{value:t(M),"onUpdate:value":re,options:(Z=m.value)==null?void 0:Z.banner,style:s(c.value?"width: 200px":"")},null,8,["value","options","style"]),a(d,{value:t(S),onKeyup:Fe(ve,["enter"]),"onUpdate:value":me,type:"text",placeholder:"\u641C\u7D22\u5B66\u751F\u540D",style:s(c.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),a(_,{style:s(c.value?"flex:1;":"min-width: 200px;")},{default:l(()=>[a(W,{type:"success",style:{width:"84px"},onClick:k[0]||(k[0]=Ke=>o(1))},{default:l(()=>[E("\u641C\u7D22")]),_:1}),a(W,{type:"warning",onClick:_e},{default:l(()=>[E("\u91CD\u7F6E\u6761\u4EF6")]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[te,t(y)]]),c.value?Be("",!0):(n(),i(ye,{key:2,onClick:k[1]||(k[1]=g=>ze(y)?y.value=!t(y):y=!t(y))},{default:l(()=>[E(K(t(y)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),a(ke,{"has-sider":""},{default:l(()=>[h.value?(n(),i(_,{key:0,style:s(t(f))},{default:l(()=>[(n(!0),D(j,null,P(new Array(20),(g,w)=>(n(),D("div",{key:w},[a(v,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!h.value&&t(x).length>0?(n(),i(_,{key:1,style:s(t(f))},{default:l(()=>[(n(!0),D(j,null,P(t(x),(g,w)=>(n(),D("div",{key:w},[a(Ue,{src:g.imgSrc,item:g,url:g.wiki_URL,"img-list":g.imgList},null,8,["src","item","url","img-list"])]))),128))]),_:1},8,["style"])):(n(),i(_,{key:2,style:s([{width:"100%"},t(f)])},{default:l(()=>[a(fe,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:l(()=>[a(we,null,{default:l(()=>[a(t(Ie))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),a(V,{"content-style":"overflow-x: scroll;"},{default:l(()=>[h.value?(n(),i(_,{key:0,style:s(t(f))},{default:l(()=>[a(v,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(n(),i(_,{key:1,style:s(t(f))},{default:l(()=>[a(Ce,{page:t(C).pageNum,"page-size":t(C).pageSize,"item-count":t(z),"on-update:page":o,"show-size-picker":"","page-sizes":[10,50,100,150],"on-update:page-size":ge},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{Oe as default};
